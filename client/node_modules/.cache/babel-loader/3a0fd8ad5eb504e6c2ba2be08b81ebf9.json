{"ast":null,"code":"var _jsxFileName = \"/home/saharsh/digital-twins-explorer/client/src/components/GraphViewerComponent/GraphViewerRelationshipViewerComponent/GraphViewerRelationshipViewerComponent.js\";\n// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport React, { Component } from \"react\";\nimport { DefaultButton, Icon } from \"office-ui-fabric-react\";\nimport Prism from \"prismjs\";\nimport ModalComponent from \"../../ModalComponent/ModalComponent\";\nimport { apiService } from \"../../../services/ApiService\";\nimport { print } from \"../../../services/LoggingService\";\nimport { eventService } from \"../../../services/EventService\";\nimport { REL_TYPE_INCOMING } from \"../../../services/Constants\";\nimport \"./GraphViewerRelationshipViewerComponent.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class GraphViewerRelationshipViewerComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.onFinishLoading = () => {\n      const {\n        isLoading\n      } = this.state;\n      if (isLoading) {\n        this.setState({\n          isLoading: false\n        });\n      }\n    };\n    this.close = () => {\n      this.setState({\n        showModal: false,\n        outgoingRelationships: null,\n        incomingRelationships: null\n      });\n    };\n    this.state = {\n      isLoading: false,\n      outgoingRelationships: null,\n      incomingRelationships: null,\n      showModal: false\n    };\n  }\n  componentDidUpdate() {\n    const {\n      outgoingRelationships,\n      incomingRelationships\n    } = this.state;\n    if (!!outgoingRelationships && !!incomingRelationships) {\n      this.onFinishLoading();\n    }\n  }\n  async open() {\n    const {\n      selectedNode\n    } = this.props;\n    if (!selectedNode) {\n      return;\n    }\n    this.setState({\n      isLoading: true,\n      showModal: true\n    });\n    setTimeout(() => {\n      document.getElementById(\"relationship-information-heading\").focus();\n    }, 200);\n    await this.getOutgoingRelationships(selectedNode.id);\n    await this.getIncomingRelationships(selectedNode.id);\n  }\n  async getOutgoingRelationships(nodeId) {\n    print(`Outgoing relationships for ${nodeId}`, \"warning\");\n    let outgoingRelationships = null;\n    try {\n      outgoingRelationships = await apiService.queryRelationships([nodeId]);\n    } catch (exc) {\n      exc.customMessage = `Error in retrieving outgoing relationships for ${nodeId}`;\n      eventService.publishError(exc);\n    }\n    this.setState({\n      outgoingRelationships\n    }, () => {\n      Prism.highlightAll();\n    });\n  }\n  async getIncomingRelationships(nodeId) {\n    print(`Incoming relationships for ${nodeId}`, \"warning\");\n    let incomingRelationships = null;\n    try {\n      incomingRelationships = await apiService.queryRelationships([nodeId], REL_TYPE_INCOMING);\n    } catch (exc) {\n      exc.customMessage = `Error in retrieving incoming relationships for ${nodeId}`;\n      eventService.publishError(exc);\n    }\n    this.setState({\n      incomingRelationships\n    }, () => {\n      Prism.highlightAll();\n    });\n  }\n  render() {\n    const {\n      incomingRelationships,\n      outgoingRelationships,\n      isLoading,\n      showModal\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(ModalComponent, {\n      isVisible: showModal,\n      isLoading: isLoading,\n      className: \"gc-relationship-view-modal\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"heading-2\",\n        tabIndex: \"0\",\n        id: \"relationship-information-heading\",\n        children: [/*#__PURE__*/_jsxDEV(Icon, {\n          iconName: \"Relationship\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 86\n        }, this), \"Relationship Information\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), !!incomingRelationships && incomingRelationships.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relationship-type\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Incoming\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relationships\",\n          children: /*#__PURE__*/_jsxDEV(\"pre\", {\n            children: /*#__PURE__*/_jsxDEV(\"code\", {\n              className: \"language-js\",\n              children: JSON.stringify(incomingRelationships, null, 1)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this), !!outgoingRelationships && outgoingRelationships.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relationship-type\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Outgoing\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relationships\",\n          children: /*#__PURE__*/_jsxDEV(\"pre\", {\n            children: /*#__PURE__*/_jsxDEV(\"code\", {\n              className: \"language-js\",\n              children: JSON.stringify(outgoingRelationships, null, 1)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn-group\",\n        children: /*#__PURE__*/_jsxDEV(DefaultButton, {\n          className: \"modal-button close-button\",\n          onClick: this.close,\n          id: \"rel-detail-close-modal-button\",\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Component","DefaultButton","Icon","Prism","ModalComponent","apiService","print","eventService","REL_TYPE_INCOMING","jsxDEV","_jsxDEV","GraphViewerRelationshipViewerComponent","constructor","props","onFinishLoading","isLoading","state","setState","close","showModal","outgoingRelationships","incomingRelationships","componentDidUpdate","open","selectedNode","setTimeout","document","getElementById","focus","getOutgoingRelationships","id","getIncomingRelationships","nodeId","queryRelationships","exc","customMessage","publishError","highlightAll","render","isVisible","className","children","tabIndex","iconName","fileName","_jsxFileName","lineNumber","columnNumber","length","JSON","stringify","onClick"],"sources":["/home/saharsh/digital-twins-explorer/client/src/components/GraphViewerComponent/GraphViewerRelationshipViewerComponent/GraphViewerRelationshipViewerComponent.js"],"sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport React, { Component } from \"react\";\nimport { DefaultButton, Icon } from \"office-ui-fabric-react\";\nimport Prism from \"prismjs\";\n\nimport ModalComponent from \"../../ModalComponent/ModalComponent\";\nimport { apiService } from \"../../../services/ApiService\";\nimport { print } from \"../../../services/LoggingService\";\nimport { eventService } from \"../../../services/EventService\";\nimport { REL_TYPE_INCOMING } from \"../../../services/Constants\";\n\nimport \"./GraphViewerRelationshipViewerComponent.scss\";\n\nexport class GraphViewerRelationshipViewerComponent extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: false,\n      outgoingRelationships: null,\n      incomingRelationships: null,\n      showModal: false\n    };\n  }\n\n  componentDidUpdate() {\n    const { outgoingRelationships, incomingRelationships } = this.state;\n\n    if (!!outgoingRelationships && !!incomingRelationships) {\n      this.onFinishLoading();\n    }\n  }\n\n  onFinishLoading = () => {\n    const { isLoading } = this.state;\n    if (isLoading) {\n      this.setState({ isLoading: false });\n    }\n  }\n\n  async open() {\n    const { selectedNode } = this.props;\n    if (!selectedNode) {\n      return;\n    }\n\n    this.setState({ isLoading: true, showModal: true });\n    setTimeout(() => {\n      document.getElementById(\"relationship-information-heading\").focus();\n    }, 200);\n    await this.getOutgoingRelationships(selectedNode.id);\n    await this.getIncomingRelationships(selectedNode.id);\n  }\n\n  async getOutgoingRelationships(nodeId) {\n    print(`Outgoing relationships for ${nodeId}`, \"warning\");\n    let outgoingRelationships = null;\n    try {\n      outgoingRelationships = await apiService.queryRelationships([ nodeId ]);\n    } catch (exc) {\n      exc.customMessage = `Error in retrieving outgoing relationships for ${nodeId}`;\n      eventService.publishError(exc);\n    }\n    this.setState({ outgoingRelationships }, () => {\n      Prism.highlightAll();\n    });\n  }\n\n  async getIncomingRelationships(nodeId) {\n    print(`Incoming relationships for ${nodeId}`, \"warning\");\n    let incomingRelationships = null;\n    try {\n      incomingRelationships = await apiService.queryRelationships([ nodeId ], REL_TYPE_INCOMING);\n    } catch (exc) {\n      exc.customMessage = `Error in retrieving incoming relationships for ${nodeId}`;\n      eventService.publishError(exc);\n    }\n    this.setState({ incomingRelationships }, () => {\n      Prism.highlightAll();\n    });\n  }\n\n  close = () => {\n    this.setState({\n      showModal: false,\n      outgoingRelationships: null,\n      incomingRelationships: null\n    });\n  }\n\n  render() {\n    const { incomingRelationships, outgoingRelationships, isLoading, showModal } = this.state;\n    return (\n      <ModalComponent isVisible={showModal} isLoading={isLoading} className=\"gc-relationship-view-modal\">\n        <h2 className=\"heading-2\" tabIndex=\"0\" id=\"relationship-information-heading\"><Icon iconName=\"Relationship\" />Relationship Information</h2>\n        {!!incomingRelationships\n          && incomingRelationships.length > 0 && (\n          <div className=\"relationship-type\">\n            <h3>Incoming</h3>\n            <div className=\"relationships\">\n              <pre>\n                <code className=\"language-js\">\n                  {JSON.stringify(incomingRelationships, null, 1)}\n                </code>\n              </pre>\n            </div>\n          </div>\n        )}\n        {!!outgoingRelationships\n          && outgoingRelationships.length > 0 && (\n          <div className=\"relationship-type\">\n            <h3>Outgoing</h3>\n            <div className=\"relationships\">\n              <pre>\n                <code className=\"language-js\">\n                  {JSON.stringify(outgoingRelationships, null, 1)}\n                </code>\n              </pre>\n            </div>\n          </div>\n        )}\n        <div className=\"btn-group\">\n          <DefaultButton className=\"modal-button close-button\" onClick={this.close} id=\"rel-detail-close-modal-button\">Close</DefaultButton>\n        </div>\n      </ModalComponent>\n    );\n  }\n\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}