{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar layout_1 = require(\"./layout\");\nvar D3StyleLayoutAdaptor = function (_super) {\n  __extends(D3StyleLayoutAdaptor, _super);\n  function D3StyleLayoutAdaptor(d3Context) {\n    var _this = _super.call(this) || this;\n    _this.d3Context = d3Context;\n    _this.event = d3Context.dispatch(layout_1.EventType[layout_1.EventType.start], layout_1.EventType[layout_1.EventType.tick], layout_1.EventType[layout_1.EventType.end]);\n    var d3layout = _this;\n    var drag;\n    _this.drag = function () {\n      if (!drag) {\n        var drag = d3Context.drag().subject(layout_1.Layout.dragOrigin).on(\"start.d3adaptor\", layout_1.Layout.dragStart).on(\"drag.d3adaptor\", function (d) {\n          layout_1.Layout.drag(d, d3Context.event);\n          d3layout.resume();\n        }).on(\"end.d3adaptor\", layout_1.Layout.dragEnd);\n      }\n      if (!arguments.length) return drag;\n      arguments[0].call(drag);\n    };\n    return _this;\n  }\n  D3StyleLayoutAdaptor.prototype.trigger = function (e) {\n    var d3event = {\n      type: layout_1.EventType[e.type],\n      alpha: e.alpha,\n      stress: e.stress\n    };\n    this.event.call(d3event.type, d3event);\n  };\n  D3StyleLayoutAdaptor.prototype.kick = function () {\n    var _this = this;\n    var t = this.d3Context.timer(function () {\n      return _super.prototype.tick.call(_this) && t.stop();\n    });\n  };\n  D3StyleLayoutAdaptor.prototype.on = function (eventType, listener) {\n    if (typeof eventType === 'string') {\n      this.event.on(eventType, listener);\n    } else {\n      this.event.on(layout_1.EventType[eventType], listener);\n    }\n    return this;\n  };\n  return D3StyleLayoutAdaptor;\n}(layout_1.Layout);\nexports.D3StyleLayoutAdaptor = D3StyleLayoutAdaptor;","map":{"version":3,"sources":["../../WebCola/src/d3v4adaptor.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAGA,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;AAUA,IAAA,oBAAA,GAAA,UAAA,MAAA,EAAA;EAA0C,SAAA,CAAA,oBAAA,EAAA,MAAA,CAAA;EAiBtC,SAAA,oBAAA,CAAoB,SAAoB,EAAA;IAAxC,IAAA,KAAA,GACI,MAAA,CAAA,IAAA,CAAA,IAAA,CAAO,IAAA,IAAA;IADS,KAAA,CAAA,SAAS,GAAT,SAAS;IAEzB,KAAI,CAAC,KAAK,GAAG,SAAS,CAAC,QAAQ,CAAC,QAAA,CAAA,SAAS,CAAC,QAAA,CAAA,SAAS,CAAC,KAAK,CAAC,EAAE,QAAA,CAAA,SAAS,CAAC,QAAA,CAAA,SAAS,CAAC,IAAI,CAAC,EAAE,QAAA,CAAA,SAAS,CAAC,QAAA,CAAA,SAAS,CAAC,GAAG,CAAC,CAAC;IAGhH,IAAI,QAAQ,GAAG,KAAI;IACnB,IAAI,IAAI;IACR,KAAI,CAAC,IAAI,GAAG,YAAA;MACR,IAAI,CAAC,IAAI,EAAE;QACP,IAAI,IAAI,GAAG,SAAS,CAAC,IAAI,CAAA,CAAE,CACtB,OAAO,CAAC,QAAA,CAAA,MAAM,CAAC,UAAU,CAAC,CAC1B,EAAE,CAAC,iBAAiB,EAAE,QAAA,CAAA,MAAM,CAAC,SAAS,CAAC,CACvC,EAAE,CAAC,gBAAgB,EAAE,UAAA,CAAC,EAAA;UACnB,QAAA,CAAA,MAAM,CAAC,IAAI,CAAM,CAAC,EAAE,SAAS,CAAC,KAAK,CAAC;UACpC,QAAQ,CAAC,MAAM,CAAA,CAAE;QACrB,CAAC,CAAC,CACD,EAAE,CAAC,eAAe,EAAE,QAAA,CAAA,MAAM,CAAC,OAAO,CAAC;MAC3C;MAED,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,OAAO,IAAI;MAKlC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;IAC3B,CAAC;;EACL;EAzCA,oBAAA,CAAA,SAAA,CAAA,OAAO,GAAP,UAAQ,CAAQ,EAAA;IACZ,IAAI,OAAO,GAAG;MAAE,IAAI,EAAE,QAAA,CAAA,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC;MAAE,KAAK,EAAE,CAAC,CAAC,KAAK;MAAE,MAAM,EAAE,CAAC,CAAC;IAAM,CAAE;IAG3E,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAO,OAAO,CAAC;EAC/C,CAAC;EAGD,oBAAA,CAAA,SAAA,CAAA,IAAI,GAAJ,YAAA;IAAA,IAAA,KAAA,GAAA,IAAA;IACI,IAAI,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,YAAA;MAAM,OAAA,MAAA,CAAA,SAAA,CAAM,IAAI,CAAA,IAAA,CAAA,KAAA,CAAE,IAAI,CAAC,CAAC,IAAI,CAAA,CAAE;IAAxB,CAAwB,CAAC;EAChE,CAAC;EAkCD,oBAAA,CAAA,SAAA,CAAA,EAAE,GAAF,UAAG,SAA6B,EAAE,QAAoB,EAAA;IAClD,IAAI,OAAO,SAAS,KAAK,QAAQ,EAAE;MAC/B,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,SAAS,EAAE,QAAQ,CAAC;KACrC,MAAM;MACH,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,QAAA,CAAA,SAAS,CAAC,SAAS,CAAC,EAAE,QAAQ,CAAC;IAChD;IACD,OAAO,IAAI;EACf,CAAC;EACL,OAAA,oBAAC;AAAD,CAAC,CAtDyC,QAAA,CAAA,MAAM,CAAA;AAAnC,OAAA,CAAA,oBAAA,GAAA,oBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar layout_1 = require(\"./layout\");\r\nvar D3StyleLayoutAdaptor = (function (_super) {\r\n    __extends(D3StyleLayoutAdaptor, _super);\r\n    function D3StyleLayoutAdaptor(d3Context) {\r\n        var _this = _super.call(this) || this;\r\n        _this.d3Context = d3Context;\r\n        _this.event = d3Context.dispatch(layout_1.EventType[layout_1.EventType.start], layout_1.EventType[layout_1.EventType.tick], layout_1.EventType[layout_1.EventType.end]);\r\n        var d3layout = _this;\r\n        var drag;\r\n        _this.drag = function () {\r\n            if (!drag) {\r\n                var drag = d3Context.drag()\r\n                    .subject(layout_1.Layout.dragOrigin)\r\n                    .on(\"start.d3adaptor\", layout_1.Layout.dragStart)\r\n                    .on(\"drag.d3adaptor\", function (d) {\r\n                    layout_1.Layout.drag(d, d3Context.event);\r\n                    d3layout.resume();\r\n                })\r\n                    .on(\"end.d3adaptor\", layout_1.Layout.dragEnd);\r\n            }\r\n            if (!arguments.length)\r\n                return drag;\r\n            arguments[0].call(drag);\r\n        };\r\n        return _this;\r\n    }\r\n    D3StyleLayoutAdaptor.prototype.trigger = function (e) {\r\n        var d3event = { type: layout_1.EventType[e.type], alpha: e.alpha, stress: e.stress };\r\n        this.event.call(d3event.type, d3event);\r\n    };\r\n    D3StyleLayoutAdaptor.prototype.kick = function () {\r\n        var _this = this;\r\n        var t = this.d3Context.timer(function () { return _super.prototype.tick.call(_this) && t.stop(); });\r\n    };\r\n    D3StyleLayoutAdaptor.prototype.on = function (eventType, listener) {\r\n        if (typeof eventType === 'string') {\r\n            this.event.on(eventType, listener);\r\n        }\r\n        else {\r\n            this.event.on(layout_1.EventType[eventType], listener);\r\n        }\r\n        return this;\r\n    };\r\n    return D3StyleLayoutAdaptor;\r\n}(layout_1.Layout));\r\nexports.D3StyleLayoutAdaptor = D3StyleLayoutAdaptor;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZDN2NGFkYXB0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9XZWJDb2xhL3NyYy9kM3Y0YWRhcHRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFHQSxtQ0FBaUQ7QUFVakQ7SUFBMEMsd0NBQU07SUFpQjVDLDhCQUFvQixTQUFvQjtRQUF4QyxZQUNJLGlCQUFPLFNBeUJWO1FBMUJtQixlQUFTLEdBQVQsU0FBUyxDQUFXO1FBRXBDLEtBQUksQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQyxrQkFBUyxDQUFDLGtCQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsa0JBQVMsQ0FBQyxrQkFBUyxDQUFDLElBQUksQ0FBQyxFQUFFLGtCQUFTLENBQUMsa0JBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBR2pILElBQUksUUFBUSxHQUFHLEtBQUksQ0FBQztRQUNwQixJQUFJLElBQUksQ0FBQztRQUNULEtBQUksQ0FBQyxJQUFJLEdBQUc7WUFDUixJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUNQLElBQUksSUFBSSxHQUFHLFNBQVMsQ0FBQyxJQUFJLEVBQUU7cUJBQ3RCLE9BQU8sQ0FBQyxlQUFNLENBQUMsVUFBVSxDQUFDO3FCQUMxQixFQUFFLENBQUMsaUJBQWlCLEVBQUUsZUFBTSxDQUFDLFNBQVMsQ0FBQztxQkFDdkMsRUFBRSxDQUFDLGdCQUFnQixFQUFFLFVBQUEsQ0FBQztvQkFDbkIsZUFBTSxDQUFDLElBQUksQ0FBTSxDQUFDLEVBQUUsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUNyQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUM7Z0JBQ3RCLENBQUMsQ0FBQztxQkFDRCxFQUFFLENBQUMsZUFBZSxFQUFFLGVBQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQzthQUM1QztZQUVELElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTTtnQkFBRSxPQUFPLElBQUksQ0FBQztZQUtuQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzVCLENBQUMsQ0FBQTs7SUFDTCxDQUFDO0lBekNELHNDQUFPLEdBQVAsVUFBUSxDQUFRO1FBQ1osSUFBSSxPQUFPLEdBQUcsRUFBRSxJQUFJLEVBQUUsa0JBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUc1RSxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFPLE9BQU8sQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFHRCxtQ0FBSSxHQUFKO1FBQUEsaUJBRUM7UUFERyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxjQUFNLE9BQUEsaUJBQU0sSUFBSSxZQUFFLElBQUksQ0FBQyxDQUFDLElBQUksRUFBRSxFQUF4QixDQUF3QixDQUFDLENBQUM7SUFDakUsQ0FBQztJQWtDRCxpQ0FBRSxHQUFGLFVBQUcsU0FBNkIsRUFBRSxRQUFvQjtRQUNsRCxJQUFJLE9BQU8sU0FBUyxLQUFLLFFBQVEsRUFBRTtZQUMvQixJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUM7U0FDdEM7YUFBTTtZQUNILElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLGtCQUFTLENBQUMsU0FBUyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUM7U0FDakQ7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBQ0wsMkJBQUM7QUFBRCxDQUFDLEFBdERELENBQTBDLGVBQU0sR0FzRC9DO0FBdERZLG9EQUFvQiJ9"]},"metadata":{},"sourceType":"script"}