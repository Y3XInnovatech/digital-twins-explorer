{"ast":null,"code":"var _jsxFileName = \"/home/saharsh/digital-twins-explorer/client/src/components/AppCommandBar/DeleteAllTwinsComponent/DeleteAllTwinsComponent.js\";\n// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport React, { Component } from \"react\";\nimport ModalComponent from \"../../ModalComponent/ModalComponent\";\nimport { DefaultButton } from \"office-ui-fabric-react\";\nimport { apiService } from \"../../../services/ApiService\";\nimport { eventService } from \"../../../services/EventService\";\nimport { print } from \"../../../services/LoggingService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst KEY_ESC = 27;\nconst KEY_TAB = 9;\nexport default class DeleteAllTwinsComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.confirm = async () => {\n      await this.deleteAllTwins();\n      this.setState({\n        showModal: false\n      });\n    };\n    this.cancel = () => {\n      this.setState({\n        showModal: false\n      });\n    };\n    this.state = {\n      showModal: false,\n      isLoading: false\n    };\n  }\n  async deleteAllTwins() {\n    this.setState({\n      isLoading: true\n    });\n    print(`*** Deleting all twins`, \"info\");\n    try {\n      const allTwins = await apiService.getAllTwins();\n      const ids = allTwins ? allTwins.map(twin => twin.$dtId) : [];\n      await apiService.deleteAllTwins(ids);\n      eventService.publishClearTwinsData();\n    } catch (exc) {\n      exc.customMessage = \"Error deleting twins\";\n      eventService.publishError(exc);\n    }\n    this.setState({\n      isLoading: false\n    });\n  }\n  open() {\n    this.setState({\n      showModal: true\n    });\n  }\n  componentDidMount() {\n    const handleKeyDown = e => {\n      if (e.keyCode === KEY_ESC && this.state.showModal) {\n        this.setState({\n          showModal: false\n        });\n        return;\n      }\n      if (e.keyCode === KEY_TAB) {\n        const deleteElement = document.getElementById(\"modal-save-cta--all-twins\");\n        const cancelElement = document.getElementById(\"modal-cancel-cta--all-twins\");\n        if (deleteElement && cancelElement && document.activeElement.id === cancelElement.id) {\n          deleteElement.focus();\n          e.preventDefault();\n        }\n      }\n    };\n    window.addEventListener(\"keydown\", e => {\n      handleKeyDown(e);\n    });\n  }\n  render() {\n    const {\n      showModal,\n      isLoading\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(ModalComponent, {\n      isVisible: showModal,\n      isLoading: isLoading,\n      className: \"gc-dialog\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"heading-2\",\n        children: this.props.t(\"deleteAllTwinsComponent.heading\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn-group\",\n        children: [/*#__PURE__*/_jsxDEV(DefaultButton, {\n          className: \"modal-button save-button\",\n          onClick: this.confirm,\n          id: \"modal-save-cta--all-twins\",\n          children: this.props.t(\"deleteAllTwinsComponent.deleteButton\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DefaultButton, {\n          className: \"modal-button cancel-button\",\n          onClick: this.cancel,\n          id: \"modal-cancel-cta--all-twins\",\n          children: this.props.t(\"deleteAllTwinsComponent.cancelButton\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Component","ModalComponent","DefaultButton","apiService","eventService","print","jsxDEV","_jsxDEV","KEY_ESC","KEY_TAB","DeleteAllTwinsComponent","constructor","props","confirm","deleteAllTwins","setState","showModal","cancel","state","isLoading","allTwins","getAllTwins","ids","map","twin","$dtId","publishClearTwinsData","exc","customMessage","publishError","open","componentDidMount","handleKeyDown","e","keyCode","deleteElement","document","getElementById","cancelElement","activeElement","id","focus","preventDefault","window","addEventListener","render","isVisible","className","children","t","fileName","_jsxFileName","lineNumber","columnNumber","onClick"],"sources":["/home/saharsh/digital-twins-explorer/client/src/components/AppCommandBar/DeleteAllTwinsComponent/DeleteAllTwinsComponent.js"],"sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport React, { Component } from \"react\";\nimport ModalComponent from \"../../ModalComponent/ModalComponent\";\nimport { DefaultButton } from \"office-ui-fabric-react\";\nimport { apiService } from \"../../../services/ApiService\";\nimport { eventService } from \"../../../services/EventService\";\nimport { print } from \"../../../services/LoggingService\";\n\nconst KEY_ESC = 27;\nconst KEY_TAB = 9;\nexport default class DeleteAllTwinsComponent extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: false,\n      isLoading: false\n    };\n  }\n\n  async deleteAllTwins() {\n    this.setState({ isLoading: true });\n\n    print(`*** Deleting all twins`, \"info\");\n    try {\n      const allTwins = await apiService.getAllTwins();\n      const ids = allTwins ? allTwins.map(twin => twin.$dtId) : [];\n      await apiService.deleteAllTwins(ids);\n      eventService.publishClearTwinsData();\n    } catch (exc) {\n      exc.customMessage = \"Error deleting twins\";\n      eventService.publishError(exc);\n    }\n\n    this.setState({ isLoading: false });\n  }\n\n  open() {\n    this.setState({ showModal: true });\n  }\n\n  confirm = async () => {\n    await this.deleteAllTwins();\n    this.setState({ showModal: false });\n  }\n\n  cancel = () => {\n    this.setState({ showModal: false });\n  }\n\n  componentDidMount() {\n    const handleKeyDown = e => {\n      if (e.keyCode === KEY_ESC && this.state.showModal) {\n        this.setState({ showModal: false });\n        return;\n      }\n\n      if (e.keyCode === KEY_TAB) {\n        const deleteElement = document.getElementById(\"modal-save-cta--all-twins\");\n        const cancelElement = document.getElementById(\"modal-cancel-cta--all-twins\");\n        if (deleteElement && cancelElement && document.activeElement.id === cancelElement.id) {\n          deleteElement.focus();\n          e.preventDefault();\n        }\n      }\n    };\n    window.addEventListener(\"keydown\", e => {\n      handleKeyDown(e);\n    });\n  }\n\n  render() {\n    const { showModal, isLoading } = this.state;\n    return (\n      <ModalComponent isVisible={showModal} isLoading={isLoading} className=\"gc-dialog\">\n        <h2 className=\"heading-2\">{this.props.t(\"deleteAllTwinsComponent.heading\")}</h2>\n        <div className=\"btn-group\">\n          <DefaultButton className=\"modal-button save-button\" onClick={this.confirm} id=\"modal-save-cta--all-twins\">{this.props.t(\"deleteAllTwinsComponent.deleteButton\")}</DefaultButton>\n          <DefaultButton className=\"modal-button cancel-button\" onClick={this.cancel} id=\"modal-cancel-cta--all-twins\">{this.props.t(\"deleteAllTwinsComponent.cancelButton\")}</DefaultButton>\n        </div>\n      </ModalComponent>\n    );\n  }\n\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}