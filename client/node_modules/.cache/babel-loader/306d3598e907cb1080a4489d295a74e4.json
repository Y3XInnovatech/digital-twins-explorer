{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n    return extendStatics(d, b);\n  };\n  return function (d, b) {\n    extendStatics(d, b);\n    function __() {\n      this.constructor = d;\n    }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar layout_1 = require(\"./layout\");\nvar D3StyleLayoutAdaptor = function (_super) {\n  __extends(D3StyleLayoutAdaptor, _super);\n  function D3StyleLayoutAdaptor() {\n    var _this = _super.call(this) || this;\n    _this.event = d3.dispatch(layout_1.EventType[layout_1.EventType.start], layout_1.EventType[layout_1.EventType.tick], layout_1.EventType[layout_1.EventType.end]);\n    var d3layout = _this;\n    var drag;\n    _this.drag = function () {\n      if (!drag) {\n        var drag = d3.behavior.drag().origin(layout_1.Layout.dragOrigin).on(\"dragstart.d3adaptor\", layout_1.Layout.dragStart).on(\"drag.d3adaptor\", function (d) {\n          layout_1.Layout.drag(d, d3.event);\n          d3layout.resume();\n        }).on(\"dragend.d3adaptor\", layout_1.Layout.dragEnd);\n      }\n      if (!arguments.length) return drag;\n      this.call(drag);\n    };\n    return _this;\n  }\n  D3StyleLayoutAdaptor.prototype.trigger = function (e) {\n    var d3event = {\n      type: layout_1.EventType[e.type],\n      alpha: e.alpha,\n      stress: e.stress\n    };\n    this.event[d3event.type](d3event);\n  };\n  D3StyleLayoutAdaptor.prototype.kick = function () {\n    var _this = this;\n    d3.timer(function () {\n      return _super.prototype.tick.call(_this);\n    });\n  };\n  D3StyleLayoutAdaptor.prototype.on = function (eventType, listener) {\n    if (typeof eventType === 'string') {\n      this.event.on(eventType, listener);\n    } else {\n      this.event.on(layout_1.EventType[eventType], listener);\n    }\n    return this;\n  };\n  return D3StyleLayoutAdaptor;\n}(layout_1.Layout);\nexports.D3StyleLayoutAdaptor = D3StyleLayoutAdaptor;\nfunction d3adaptor() {\n  return new D3StyleLayoutAdaptor();\n}\nexports.d3adaptor = d3adaptor;","map":{"version":3,"sources":["../../WebCola/src/d3v3adaptor.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAMA,IAAA,QAAA,GAAA,OAAA,CAAA,UAAA,CAAA;AAGI,IAAA,oBAAA,GAAA,UAAA,MAAA,EAAA;EAA0C,SAAA,CAAA,oBAAA,EAAA,MAAA,CAAA;EAgBtC,SAAA,oBAAA,CAAA,EAAA;IAAA,IAAA,KAAA,GACI,MAAA,CAAA,IAAA,CAAA,IAAA,CAAO,IAAA,IAAA;IAhBX,KAAA,CAAA,KAAK,GAAG,EAAE,CAAC,QAAQ,CAAC,QAAA,CAAA,SAAS,CAAC,QAAA,CAAA,SAAS,CAAC,KAAK,CAAC,EAAE,QAAA,CAAA,SAAS,CAAC,QAAA,CAAA,SAAS,CAAC,IAAI,CAAC,EAAE,QAAA,CAAA,SAAS,CAAC,QAAA,CAAA,SAAS,CAAC,GAAG,CAAC,CAAC;IAkBhG,IAAI,QAAQ,GAAG,KAAI;IACnB,IAAI,IAAI;IACR,KAAI,CAAC,IAAI,GAAG,YAAA;MACR,IAAI,CAAC,IAAI,EAAE;QACP,IAAI,IAAI,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAA,CAAE,CACxB,MAAM,CAAC,QAAA,CAAA,MAAM,CAAC,UAAU,CAAC,CACzB,EAAE,CAAC,qBAAqB,EAAE,QAAA,CAAA,MAAM,CAAC,SAAS,CAAC,CAC3C,EAAE,CAAC,gBAAgB,EAAE,UAAA,CAAC,EAAA;UACnB,QAAA,CAAA,MAAM,CAAC,IAAI,CAAC,CAAC,EAAO,EAAE,CAAC,KAAK,CAAC;UAC7B,QAAQ,CAAC,MAAM,CAAA,CAAE;QACrB,CAAC,CAAC,CACD,EAAE,CAAC,mBAAmB,EAAE,QAAA,CAAA,MAAM,CAAC,OAAO,CAAC;MAC/C;MAED,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,OAAO,IAAI;MAGlC,IAAI,CAEC,IAAI,CAAC,IAAI,CAAC;IACnB,CAAC;;EACL;EArCA,oBAAA,CAAA,SAAA,CAAA,OAAO,GAAP,UAAQ,CAAQ,EAAA;IACZ,IAAI,OAAO,GAAG;MAAE,IAAI,EAAE,QAAA,CAAA,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC;MAAE,KAAK,EAAE,CAAC,CAAC,KAAK;MAAE,MAAM,EAAE,CAAC,CAAC;IAAM,CAAE;IAC3E,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC;EACrC,CAAC;EAGD,oBAAA,CAAA,SAAA,CAAA,IAAI,GAAJ,YAAA;IAAA,IAAA,KAAA,GAAA,IAAA;IACI,EAAE,CAAC,KAAK,CAAC,YAAA;MAAM,OAAA,MAAA,CAAA,SAAA,CAAM,IAAI,CAAA,IAAA,CAAA,KAAA,CAAE;IAAZ,CAAY,CAAC;EAChC,CAAC;EAgCD,oBAAA,CAAA,SAAA,CAAA,EAAE,GAAF,UAAG,SAA6B,EAAE,QAAoB,EAAA;IAClD,IAAI,OAAO,SAAS,KAAK,QAAQ,EAAE;MAC/B,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,SAAS,EAAE,QAAQ,CAAC;KACrC,MAAM;MACH,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,QAAA,CAAA,SAAS,CAAC,SAAS,CAAC,EAAE,QAAQ,CAAC;IAChD;IACD,OAAO,IAAI;EACf,CAAC;EACL,OAAA,oBAAC;AAAD,CAAC,CAnDyC,QAAA,CAAA,MAAM,CAAA;AAAnC,OAAA,CAAA,oBAAA,GAAA,oBAAA;AAiEb,SAAgB,SAAS,CAAA,EAAA;EACrB,OAAO,IAAI,oBAAoB,CAAA,CAAE;AACrC;AAFA,OAAA,CAAA,SAAA,GAAA,SAAA","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar layout_1 = require(\"./layout\");\r\nvar D3StyleLayoutAdaptor = (function (_super) {\r\n    __extends(D3StyleLayoutAdaptor, _super);\r\n    function D3StyleLayoutAdaptor() {\r\n        var _this = _super.call(this) || this;\r\n        _this.event = d3.dispatch(layout_1.EventType[layout_1.EventType.start], layout_1.EventType[layout_1.EventType.tick], layout_1.EventType[layout_1.EventType.end]);\r\n        var d3layout = _this;\r\n        var drag;\r\n        _this.drag = function () {\r\n            if (!drag) {\r\n                var drag = d3.behavior.drag()\r\n                    .origin(layout_1.Layout.dragOrigin)\r\n                    .on(\"dragstart.d3adaptor\", layout_1.Layout.dragStart)\r\n                    .on(\"drag.d3adaptor\", function (d) {\r\n                    layout_1.Layout.drag(d, d3.event);\r\n                    d3layout.resume();\r\n                })\r\n                    .on(\"dragend.d3adaptor\", layout_1.Layout.dragEnd);\r\n            }\r\n            if (!arguments.length)\r\n                return drag;\r\n            this\r\n                .call(drag);\r\n        };\r\n        return _this;\r\n    }\r\n    D3StyleLayoutAdaptor.prototype.trigger = function (e) {\r\n        var d3event = { type: layout_1.EventType[e.type], alpha: e.alpha, stress: e.stress };\r\n        this.event[d3event.type](d3event);\r\n    };\r\n    D3StyleLayoutAdaptor.prototype.kick = function () {\r\n        var _this = this;\r\n        d3.timer(function () { return _super.prototype.tick.call(_this); });\r\n    };\r\n    D3StyleLayoutAdaptor.prototype.on = function (eventType, listener) {\r\n        if (typeof eventType === 'string') {\r\n            this.event.on(eventType, listener);\r\n        }\r\n        else {\r\n            this.event.on(layout_1.EventType[eventType], listener);\r\n        }\r\n        return this;\r\n    };\r\n    return D3StyleLayoutAdaptor;\r\n}(layout_1.Layout));\r\nexports.D3StyleLayoutAdaptor = D3StyleLayoutAdaptor;\r\nfunction d3adaptor() {\r\n    return new D3StyleLayoutAdaptor();\r\n}\r\nexports.d3adaptor = d3adaptor;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZDN2M2FkYXB0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9XZWJDb2xhL3NyYy9kM3YzYWRhcHRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFNQSxtQ0FBa0Q7QUFHOUM7SUFBMEMsd0NBQU07SUFnQjVDO1FBQUEsWUFDSSxpQkFBTyxTQXVCVjtRQXZDRCxXQUFLLEdBQUcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxrQkFBUyxDQUFDLGtCQUFTLENBQUMsS0FBSyxDQUFDLEVBQUUsa0JBQVMsQ0FBQyxrQkFBUyxDQUFDLElBQUksQ0FBQyxFQUFFLGtCQUFTLENBQUMsa0JBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBa0JqRyxJQUFJLFFBQVEsR0FBRyxLQUFJLENBQUM7UUFDcEIsSUFBSSxJQUFJLENBQUM7UUFDVCxLQUFJLENBQUMsSUFBSSxHQUFHO1lBQ1IsSUFBSSxDQUFDLElBQUksRUFBRTtnQkFDUCxJQUFJLElBQUksR0FBRyxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRTtxQkFDeEIsTUFBTSxDQUFDLGVBQU0sQ0FBQyxVQUFVLENBQUM7cUJBQ3pCLEVBQUUsQ0FBQyxxQkFBcUIsRUFBRSxlQUFNLENBQUMsU0FBUyxDQUFDO3FCQUMzQyxFQUFFLENBQUMsZ0JBQWdCLEVBQUUsVUFBQSxDQUFDO29CQUNuQixlQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBTyxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQzlCLFFBQVEsQ0FBQyxNQUFNLEVBQUUsQ0FBQztnQkFDdEIsQ0FBQyxDQUFDO3FCQUNELEVBQUUsQ0FBQyxtQkFBbUIsRUFBRSxlQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7YUFDaEQ7WUFFRCxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU07Z0JBQUUsT0FBTyxJQUFJLENBQUM7WUFHbkMsSUFBSTtpQkFFQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDcEIsQ0FBQyxDQUFBOztJQUNMLENBQUM7SUFyQ0Qsc0NBQU8sR0FBUCxVQUFRLENBQVE7UUFDWixJQUFJLE9BQU8sR0FBRyxFQUFFLElBQUksRUFBRSxrQkFBUyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQzVFLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFHRCxtQ0FBSSxHQUFKO1FBQUEsaUJBRUM7UUFERyxFQUFFLENBQUMsS0FBSyxDQUFDLGNBQU0sT0FBQSxpQkFBTSxJQUFJLFlBQUUsRUFBWixDQUFZLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBZ0NELGlDQUFFLEdBQUYsVUFBRyxTQUE2QixFQUFFLFFBQW9CO1FBQ2xELElBQUksT0FBTyxTQUFTLEtBQUssUUFBUSxFQUFFO1lBQy9CLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQztTQUN0QzthQUFNO1lBQ0gsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsa0JBQVMsQ0FBQyxTQUFTLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztTQUNqRDtRQUNELE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7SUFDTCwyQkFBQztBQUFELENBQUMsQUFuREQsQ0FBMEMsZUFBTSxHQW1EL0M7QUFuRFksb0RBQW9CO0FBaUVqQyxTQUFnQixTQUFTO0lBQ3JCLE9BQU8sSUFBSSxvQkFBb0IsRUFBRSxDQUFDO0FBQ3RDLENBQUM7QUFGRCw4QkFFQyJ9"]},"metadata":{},"sourceType":"script"}