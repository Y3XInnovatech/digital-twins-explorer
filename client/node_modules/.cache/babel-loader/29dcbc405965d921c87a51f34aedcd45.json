{"ast":null,"code":"var _jsxFileName = \"/home/saharsh/Music/digital-twins-explorer/client/src/components/ModelViewerComponent/ModelViewerCreateComponent/ModelViewerCreateComponent.js\";\n// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport React, { Component } from \"react\";\nimport { TextField, DefaultButton, PrimaryButton, FocusZone, FocusZoneTabbableElements } from \"office-ui-fabric-react\";\nimport ModalComponent from \"../../ModalComponent/ModalComponent\";\nimport { ModelService } from \"../../../services/ModelService\";\nimport { apiService } from \"../../../services/ApiService\";\nimport { print } from \"../../../services/LoggingService\";\nimport { eventService } from \"../../../services/EventService\";\nimport \"./ModelViewerCreateComponent.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class ModelViewerCreateComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.cancel = e => {\n      e.preventDefault();\n      this.setState({\n        showModal: false\n      });\n    };\n    this.onNameChange = evt => {\n      this.setState({\n        name: evt.target.value\n      });\n    };\n    this.getStyles = () => ({\n      fieldGroup: [{\n        height: \"32px\"\n      }]\n    });\n    this.save = async e => {\n      e.preventDefault();\n      const {\n        name,\n        item\n      } = this.state;\n      if (name === \"\") {\n        this.setState({\n          error: \"Please enter a value.\"\n        });\n        return;\n      }\n      this.setState({\n        isLoading: true\n      });\n      try {\n        print(`*** Creating a twin instance`, \"info\");\n        const modelService = new ModelService();\n        const payload = await modelService.createPayload(item.key);\n        print(\"Generated model payload:\", \"info\");\n        print(JSON.stringify(payload, null, 2), \"info\");\n        const twinResult = await apiService.addTwin(name, payload);\n        print(\"*** Creation result:\", \"info\");\n        print(JSON.stringify(twinResult, null, 2), \"info\");\n        eventService.publishCreateTwin({\n          $dtId: name,\n          $metadata: {\n            $model: item.key\n          }\n        });\n        eventService.publishSelection();\n      } catch (exc) {\n        exc.customMessage = \"Error in instance creation\";\n        eventService.publishError(exc);\n      }\n      this.setState({\n        showModal: false,\n        isLoading: false\n      });\n    };\n    this.state = {\n      showModal: false,\n      isLoading: false,\n      name: \"\",\n      error: \"\",\n      item: null\n    };\n  }\n  open(item) {\n    this.setState({\n      item,\n      showModal: true,\n      name: \"\",\n      error: \"\"\n    });\n  }\n  render() {\n    const {\n      showModal,\n      name,\n      error,\n      isLoading\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(ModalComponent, {\n      isVisible: showModal,\n      isLoading: isLoading,\n      className: \"mv-create\",\n      children: /*#__PURE__*/_jsxDEV(FocusZone, {\n        handleTabKey: FocusZoneTabbableElements.all,\n        isCircularNavigation: true,\n        defaultActiveElement: \"#outlined-required\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.save,\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"heading-2\",\n            children: this.props.t(\"modelViewerCreateComponent.heading\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TextField, {\n            required: true,\n            errorMessage: error,\n            id: \"outlined-required\",\n            className: \"name-input\",\n            styles: this.getStyles,\n            value: name,\n            onChange: this.onNameChange,\n            autoFocus: true,\n            ariaLabel: this.props.t(\"modelViewerCreateComponent.heading\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"btn-group\",\n            children: [/*#__PURE__*/_jsxDEV(PrimaryButton, {\n              type: \"submit\",\n              className: \"modal-button save-button\",\n              onClick: this.save,\n              children: this.props.t(\"modelViewerCreateComponent.saveButton\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(DefaultButton, {\n              className: \"modal-button cancel-button\",\n              onClick: this.cancel,\n              children: this.props.t(\"modelViewerCreateComponent.cancelButton\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Component","TextField","DefaultButton","PrimaryButton","FocusZone","FocusZoneTabbableElements","ModalComponent","ModelService","apiService","print","eventService","jsxDEV","_jsxDEV","ModelViewerCreateComponent","constructor","props","cancel","e","preventDefault","setState","showModal","onNameChange","evt","name","target","value","getStyles","fieldGroup","height","save","item","state","error","isLoading","modelService","payload","createPayload","key","JSON","stringify","twinResult","addTwin","publishCreateTwin","$dtId","$metadata","$model","publishSelection","exc","customMessage","publishError","open","render","isVisible","className","children","handleTabKey","all","isCircularNavigation","defaultActiveElement","onSubmit","t","fileName","_jsxFileName","lineNumber","columnNumber","required","errorMessage","id","styles","onChange","autoFocus","ariaLabel","type","onClick"],"sources":["/home/saharsh/Music/digital-twins-explorer/client/src/components/ModelViewerComponent/ModelViewerCreateComponent/ModelViewerCreateComponent.js"],"sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport React, { Component } from \"react\";\nimport { TextField, DefaultButton, PrimaryButton, FocusZone, FocusZoneTabbableElements } from \"office-ui-fabric-react\";\n\nimport ModalComponent from \"../../ModalComponent/ModalComponent\";\nimport { ModelService } from \"../../../services/ModelService\";\nimport { apiService } from \"../../../services/ApiService\";\nimport { print } from \"../../../services/LoggingService\";\nimport { eventService } from \"../../../services/EventService\";\n\nimport \"./ModelViewerCreateComponent.scss\";\n\nexport class ModelViewerCreateComponent extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: false,\n      isLoading: false,\n      name: \"\",\n      error: \"\",\n      item: null\n    };\n  }\n\n  open(item) {\n    this.setState({ item, showModal: true, name: \"\", error: \"\" });\n  }\n\n  cancel = e => {\n    e.preventDefault();\n    this.setState({ showModal: false });\n  }\n\n  onNameChange = evt => {\n    this.setState({ name: evt.target.value });\n  }\n\n  getStyles = () => ({\n    fieldGroup: [\n      { height: \"32px\" }\n    ]\n  })\n\n  save = async e => {\n    e.preventDefault();\n    const { name, item } = this.state;\n    if (name === \"\") {\n      this.setState({ error: \"Please enter a value.\" });\n      return;\n    }\n\n    this.setState({ isLoading: true });\n    try {\n      print(`*** Creating a twin instance`, \"info\");\n      const modelService = new ModelService();\n      const payload = await modelService.createPayload(item.key);\n      print(\"Generated model payload:\", \"info\");\n      print(JSON.stringify(payload, null, 2), \"info\");\n\n      const twinResult = await apiService.addTwin(name, payload);\n      print(\"*** Creation result:\", \"info\");\n      print(JSON.stringify(twinResult, null, 2), \"info\");\n\n      eventService.publishCreateTwin({ $dtId: name, $metadata: { $model: item.key } });\n      eventService.publishSelection();\n    } catch (exc) {\n      exc.customMessage = \"Error in instance creation\";\n      eventService.publishError(exc);\n    }\n\n    this.setState({ showModal: false, isLoading: false });\n  }\n\n  render() {\n    const { showModal, name, error, isLoading } = this.state;\n    return (\n      <ModalComponent isVisible={showModal} isLoading={isLoading} className=\"mv-create\">\n        <FocusZone handleTabKey={FocusZoneTabbableElements.all} isCircularNavigation defaultActiveElement=\"#outlined-required\">\n          <form onSubmit={this.save}>\n            <h2 className=\"heading-2\">{this.props.t(\"modelViewerCreateComponent.heading\")}</h2>\n            <TextField required errorMessage={error} id=\"outlined-required\" className=\"name-input\" styles={this.getStyles}\n              value={name} onChange={this.onNameChange} autoFocus ariaLabel={this.props.t(\"modelViewerCreateComponent.heading\")} />\n            <div className=\"btn-group\">\n              <PrimaryButton type=\"submit\" className=\"modal-button save-button\" onClick={this.save}>{this.props.t(\"modelViewerCreateComponent.saveButton\")}</PrimaryButton>\n              <DefaultButton className=\"modal-button cancel-button\" onClick={this.cancel}>{this.props.t(\"modelViewerCreateComponent.cancelButton\")}</DefaultButton>\n            </div>\n          </form>\n        </FocusZone>\n      </ModalComponent>\n    );\n  }\n\n}\n"],"mappings":";AAAA;AACA;;AAEA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,SAASC,SAAS,EAAEC,aAAa,EAAEC,aAAa,EAAEC,SAAS,EAAEC,yBAAyB,QAAQ,wBAAwB;AAEtH,OAAOC,cAAc,MAAM,qCAAqC;AAChE,SAASC,YAAY,QAAQ,gCAAgC;AAC7D,SAASC,UAAU,QAAQ,8BAA8B;AACzD,SAASC,KAAK,QAAQ,kCAAkC;AACxD,SAASC,YAAY,QAAQ,gCAAgC;AAE7D,OAAO,mCAAmC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3C,OAAO,MAAMC,0BAA0B,SAASb,SAAS,CAAC;EAExDc,WAAWA,CAACC,KAAK,EAAE;IACjB,KAAK,CAACA,KAAK,CAAC;IAAC,KAcfC,MAAM,GAAGC,CAAC,IAAI;MACZA,CAAC,CAACC,cAAc,CAAC,CAAC;MAClB,IAAI,CAACC,QAAQ,CAAC;QAAEC,SAAS,EAAE;MAAM,CAAC,CAAC;IACrC,CAAC;IAAA,KAEDC,YAAY,GAAGC,GAAG,IAAI;MACpB,IAAI,CAACH,QAAQ,CAAC;QAAEI,IAAI,EAAED,GAAG,CAACE,MAAM,CAACC;MAAM,CAAC,CAAC;IAC3C,CAAC;IAAA,KAEDC,SAAS,GAAG,OAAO;MACjBC,UAAU,EAAE,CACV;QAAEC,MAAM,EAAE;MAAO,CAAC;IAEtB,CAAC,CAAC;IAAA,KAEFC,IAAI,GAAG,MAAMZ,CAAC,IAAI;MAChBA,CAAC,CAACC,cAAc,CAAC,CAAC;MAClB,MAAM;QAAEK,IAAI;QAAEO;MAAK,CAAC,GAAG,IAAI,CAACC,KAAK;MACjC,IAAIR,IAAI,KAAK,EAAE,EAAE;QACf,IAAI,CAACJ,QAAQ,CAAC;UAAEa,KAAK,EAAE;QAAwB,CAAC,CAAC;QACjD;MACF;MAEA,IAAI,CAACb,QAAQ,CAAC;QAAEc,SAAS,EAAE;MAAK,CAAC,CAAC;MAClC,IAAI;QACFxB,KAAK,CAAC,8BAA8B,EAAE,MAAM,CAAC;QAC7C,MAAMyB,YAAY,GAAG,IAAI3B,YAAY,CAAC,CAAC;QACvC,MAAM4B,OAAO,GAAG,MAAMD,YAAY,CAACE,aAAa,CAACN,IAAI,CAACO,GAAG,CAAC;QAC1D5B,KAAK,CAAC,0BAA0B,EAAE,MAAM,CAAC;QACzCA,KAAK,CAAC6B,IAAI,CAACC,SAAS,CAACJ,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC;QAE/C,MAAMK,UAAU,GAAG,MAAMhC,UAAU,CAACiC,OAAO,CAAClB,IAAI,EAAEY,OAAO,CAAC;QAC1D1B,KAAK,CAAC,sBAAsB,EAAE,MAAM,CAAC;QACrCA,KAAK,CAAC6B,IAAI,CAACC,SAAS,CAACC,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,MAAM,CAAC;QAElD9B,YAAY,CAACgC,iBAAiB,CAAC;UAAEC,KAAK,EAAEpB,IAAI;UAAEqB,SAAS,EAAE;YAAEC,MAAM,EAAEf,IAAI,CAACO;UAAI;QAAE,CAAC,CAAC;QAChF3B,YAAY,CAACoC,gBAAgB,CAAC,CAAC;MACjC,CAAC,CAAC,OAAOC,GAAG,EAAE;QACZA,GAAG,CAACC,aAAa,GAAG,4BAA4B;QAChDtC,YAAY,CAACuC,YAAY,CAACF,GAAG,CAAC;MAChC;MAEA,IAAI,CAAC5B,QAAQ,CAAC;QAAEC,SAAS,EAAE,KAAK;QAAEa,SAAS,EAAE;MAAM,CAAC,CAAC;IACvD,CAAC;IAxDC,IAAI,CAACF,KAAK,GAAG;MACXX,SAAS,EAAE,KAAK;MAChBa,SAAS,EAAE,KAAK;MAChBV,IAAI,EAAE,EAAE;MACRS,KAAK,EAAE,EAAE;MACTF,IAAI,EAAE;IACR,CAAC;EACH;EAEAoB,IAAIA,CAACpB,IAAI,EAAE;IACT,IAAI,CAACX,QAAQ,CAAC;MAAEW,IAAI;MAAEV,SAAS,EAAE,IAAI;MAAEG,IAAI,EAAE,EAAE;MAAES,KAAK,EAAE;IAAG,CAAC,CAAC;EAC/D;EA+CAmB,MAAMA,CAAA,EAAG;IACP,MAAM;MAAE/B,SAAS;MAAEG,IAAI;MAAES,KAAK;MAAEC;IAAU,CAAC,GAAG,IAAI,CAACF,KAAK;IACxD,oBACEnB,OAAA,CAACN,cAAc;MAAC8C,SAAS,EAAEhC,SAAU;MAACa,SAAS,EAAEA,SAAU;MAACoB,SAAS,EAAC,WAAW;MAAAC,QAAA,eAC/E1C,OAAA,CAACR,SAAS;QAACmD,YAAY,EAAElD,yBAAyB,CAACmD,GAAI;QAACC,oBAAoB;QAACC,oBAAoB,EAAC,oBAAoB;QAAAJ,QAAA,eACpH1C,OAAA;UAAM+C,QAAQ,EAAE,IAAI,CAAC9B,IAAK;UAAAyB,QAAA,gBACxB1C,OAAA;YAAIyC,SAAS,EAAC,WAAW;YAAAC,QAAA,EAAE,IAAI,CAACvC,KAAK,CAAC6C,CAAC,CAAC,oCAAoC;UAAC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eACnFpD,OAAA,CAACX,SAAS;YAACgE,QAAQ;YAACC,YAAY,EAAElC,KAAM;YAACmC,EAAE,EAAC,mBAAmB;YAACd,SAAS,EAAC,YAAY;YAACe,MAAM,EAAE,IAAI,CAAC1C,SAAU;YAC5GD,KAAK,EAAEF,IAAK;YAAC8C,QAAQ,EAAE,IAAI,CAAChD,YAAa;YAACiD,SAAS;YAACC,SAAS,EAAE,IAAI,CAACxD,KAAK,CAAC6C,CAAC,CAAC,oCAAoC;UAAE;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eACvHpD,OAAA;YAAKyC,SAAS,EAAC,WAAW;YAAAC,QAAA,gBACxB1C,OAAA,CAACT,aAAa;cAACqE,IAAI,EAAC,QAAQ;cAACnB,SAAS,EAAC,0BAA0B;cAACoB,OAAO,EAAE,IAAI,CAAC5C,IAAK;cAAAyB,QAAA,EAAE,IAAI,CAACvC,KAAK,CAAC6C,CAAC,CAAC,uCAAuC;YAAC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAgB,CAAC,eAC7JpD,OAAA,CAACV,aAAa;cAACmD,SAAS,EAAC,4BAA4B;cAACoB,OAAO,EAAE,IAAI,CAACzD,MAAO;cAAAsC,QAAA,EAAE,IAAI,CAACvC,KAAK,CAAC6C,CAAC,CAAC,yCAAyC;YAAC;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAgB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClJ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACF;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAErB;AAEF","ignoreList":[]},"metadata":{},"sourceType":"module"}