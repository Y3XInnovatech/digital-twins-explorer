{"ast":null,"code":"var _jsxFileName = \"/home/saharsh/digital-twins-explorer/client/src/components/GraphViewerComponent/GraphViewerRelationshipDeleteComponent/GraphViewerRelationshipDeleteComponent.js\";\n// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport React, { Component } from \"react\";\nimport { DefaultButton } from \"office-ui-fabric-react\";\nimport { withTranslation } from \"react-i18next\";\nimport ModalComponent from \"../../ModalComponent/ModalComponent\";\nimport { apiService } from \"../../../services/ApiService\";\nimport { print } from \"../../../services/LoggingService\";\nimport { eventService } from \"../../../services/EventService\";\nimport \"../GraphViewerComponentShared.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass GraphViewerRelationshipDeleteComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.confirm = async () => {\n      await this.deleteSelected();\n      this.setState({\n        showModal: false\n      });\n    };\n    this.cancel = () => {\n      this.setState({\n        showModal: false\n      });\n    };\n    this.state = {\n      showModal: false,\n      isLoading: false\n    };\n  }\n  async deleteSelected() {\n    const {\n      selectedEdges\n    } = this.props;\n    if (selectedEdges) {\n      this.setState({\n        isLoading: true\n      });\n      await Promise.all(selectedEdges.map(this.deleteRelationship));\n      this.setState({\n        isLoading: false\n      });\n    }\n  }\n  async deleteRelationship(edge) {\n    try {\n      const {\n        source,\n        relationshipId\n      } = edge;\n      print(`*** Deleting relationship ${relationshipId}`, \"info\");\n      await apiService.deleteRelationship(source, relationshipId);\n      eventService.publishDeleteRelationship({\n        $sourceId: source,\n        $relationshipId: relationshipId\n      });\n    } catch (exc) {\n      exc.customMessage = \"Error deleting relationship\";\n      eventService.publishError(exc);\n    }\n  }\n  open() {\n    const {\n      selectedEdges\n    } = this.props;\n    if (!selectedEdges || selectedEdges.length === 0) {\n      return;\n    }\n    this.setState({\n      showModal: true\n    }, () => {\n      setTimeout(() => {\n        document.getElementById(\"delete-relationship-button\").focus();\n      }, 200);\n    });\n  }\n  render() {\n    const {\n      showModal,\n      isLoading\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(ModalComponent, {\n      isVisible: showModal,\n      isLoading: isLoading,\n      className: \"gc-dialog\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"heading-2\",\n        children: this.props.t(\"graphViewerRelationshipDeleteComponent.heading\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn-group\",\n        children: [/*#__PURE__*/_jsxDEV(DefaultButton, {\n          className: \"modal-button save-button\",\n          onClick: this.confirm,\n          id: \"delete-relationship-button\",\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DefaultButton, {\n          className: \"modal-button cancel-button\",\n          onClick: this.cancel,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default withTranslation(\"translation\", {\n  withRef: true\n})(GraphViewerRelationshipDeleteComponent);","map":{"version":3,"names":["React","Component","DefaultButton","withTranslation","ModalComponent","apiService","print","eventService","jsxDEV","_jsxDEV","GraphViewerRelationshipDeleteComponent","constructor","props","confirm","deleteSelected","setState","showModal","cancel","state","isLoading","selectedEdges","Promise","all","map","deleteRelationship","edge","source","relationshipId","publishDeleteRelationship","$sourceId","$relationshipId","exc","customMessage","publishError","open","length","setTimeout","document","getElementById","focus","render","isVisible","className","children","t","fileName","_jsxFileName","lineNumber","columnNumber","onClick","id","withRef"],"sources":["/home/saharsh/digital-twins-explorer/client/src/components/GraphViewerComponent/GraphViewerRelationshipDeleteComponent/GraphViewerRelationshipDeleteComponent.js"],"sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport React, { Component } from \"react\";\nimport { DefaultButton } from \"office-ui-fabric-react\";\nimport { withTranslation } from \"react-i18next\";\n\nimport ModalComponent from \"../../ModalComponent/ModalComponent\";\nimport { apiService } from \"../../../services/ApiService\";\nimport { print } from \"../../../services/LoggingService\";\nimport { eventService } from \"../../../services/EventService\";\n\nimport \"../GraphViewerComponentShared.scss\";\n\nclass GraphViewerRelationshipDeleteComponent extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: false,\n      isLoading: false\n    };\n  }\n\n  async deleteSelected() {\n    const { selectedEdges } = this.props;\n    if (selectedEdges) {\n      this.setState({ isLoading: true });\n      await Promise.all(selectedEdges.map(this.deleteRelationship));\n      this.setState({ isLoading: false });\n    }\n  }\n\n  async deleteRelationship(edge) {\n    try {\n      const { source, relationshipId } = edge;\n      print(`*** Deleting relationship ${relationshipId}`, \"info\");\n      await apiService.deleteRelationship(source, relationshipId);\n      eventService.publishDeleteRelationship({ $sourceId: source, $relationshipId: relationshipId });\n    } catch (exc) {\n      exc.customMessage = \"Error deleting relationship\";\n      eventService.publishError(exc);\n    }\n  }\n\n  open() {\n    const { selectedEdges } = this.props;\n    if (!selectedEdges || selectedEdges.length === 0) {\n      return;\n    }\n\n    this.setState({ showModal: true }, () => {\n      setTimeout(() => {\n        document.getElementById(\"delete-relationship-button\").focus();\n      }, 200);\n    });\n  }\n\n  confirm = async () => {\n    await this.deleteSelected();\n    this.setState({ showModal: false });\n  }\n\n  cancel = () => {\n    this.setState({ showModal: false });\n  }\n\n  render() {\n    const { showModal, isLoading } = this.state;\n    return (\n      <ModalComponent isVisible={showModal} isLoading={isLoading} className=\"gc-dialog\">\n        <h2 className=\"heading-2\">{this.props.t(\"graphViewerRelationshipDeleteComponent.heading\")}</h2>\n        <div className=\"btn-group\">\n          <DefaultButton className=\"modal-button save-button\" onClick={this.confirm} id=\"delete-relationship-button\">Delete</DefaultButton>\n          <DefaultButton className=\"modal-button cancel-button\" onClick={this.cancel}>Cancel</DefaultButton>\n        </div>\n      </ModalComponent>\n    );\n  }\n\n}\n\nexport default withTranslation(\"translation\", { withRef: true })(GraphViewerRelationshipDeleteComponent);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}