{"ast":null,"code":";\n(function () {\n  'use strict';\n\n  var defaults = {\n    container: false // can be a HTML or jQuery element or jQuery selector\n    ,\n    viewLiveFramerate: 0 // set false to update graph pan only on drag end; set 0 to do it instantly; set a number (frames per second) to update not more than N times per second\n    ,\n    dblClickDelay: 200 // milliseconds\n    ,\n    removeCustomContainer: true // destroy the container specified by user on plugin destroy\n    ,\n    rerenderDelay: 500 // ms to throttle rerender updates to the panzoom for performance\n  };\n  var debounce = function () {\n    /**\n     * lodash 3.1.1 (Custom Build) <https://lodash.com/>\n     * Build: `lodash modern modularize exports=\"npm\" -o ./`\n     * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n     * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n     * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n     * Available under MIT license <https://lodash.com/license>\n     */\n    /** Used as the `TypeError` message for \"Functions\" methods. */\n    var FUNC_ERROR_TEXT = 'Expected a function';\n\n    /* Native method references for those with the same name as other `lodash` methods. */\n    var nativeMax = Math.max,\n      nativeNow = Date.now;\n\n    /**\n     * Gets the number of milliseconds that have elapsed since the Unix epoch\n     * (1 January 1970 00:00:00 UTC).\n     *\n     * @static\n     * @memberOf _\n     * @category Date\n     * @example\n     *\n     * _.defer(function(stamp) {\n     *   console.log(_.now() - stamp);\n     * }, _.now());\n     * // => logs the number of milliseconds it took for the deferred function to be invoked\n     */\n    var now = nativeNow || function () {\n      return new Date().getTime();\n    };\n\n    /**\n     * Creates a debounced function that delays invoking `func` until after `wait`\n     * milliseconds have elapsed since the last time the debounced function was\n     * invoked. The debounced function comes with a `cancel` method to cancel\n     * delayed invocations. Provide an options object to indicate that `func`\n     * should be invoked on the leading and/or trailing edge of the `wait` timeout.\n     * Subsequent calls to the debounced function return the result of the last\n     * `func` invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked\n     * on the trailing edge of the timeout only if the the debounced function is\n     * invoked more than once during the `wait` timeout.\n     *\n     * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)\n     * for details over the differences between `_.debounce` and `_.throttle`.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to debounce.\n     * @param {number} [wait=0] The number of milliseconds to delay.\n     * @param {Object} [options] The options object.\n     * @param {boolean} [options.leading=false] Specify invoking on the leading\n     *  edge of the timeout.\n     * @param {number} [options.maxWait] The maximum time `func` is allowed to be\n     *  delayed before it's invoked.\n     * @param {boolean} [options.trailing=true] Specify invoking on the trailing\n     *  edge of the timeout.\n     * @returns {Function} Returns the new debounced function.\n     * @example\n     *\n     * // avoid costly calculations while the window size is in flux\n     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n     *\n     * // invoke `sendMail` when the click event is fired, debouncing subsequent calls\n     * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {\n     *   'leading': true,\n     *   'trailing': false\n     * }));\n     *\n     * // ensure `batchLog` is invoked once after 1 second of debounced calls\n     * var source = new EventSource('/stream');\n     * jQuery(source).on('message', _.debounce(batchLog, 250, {\n     *   'maxWait': 1000\n     * }));\n     *\n     * // cancel a debounced call\n     * var todoChanges = _.debounce(batchLog, 1000);\n     * Object.observe(models.todo, todoChanges);\n     *\n     * Object.observe(models, function(changes) {\n     *   if (_.find(changes, { 'user': 'todo', 'type': 'delete'})) {\n     *     todoChanges.cancel();\n     *   }\n     * }, ['delete']);\n     *\n     * // ...at some point `models.todo` is changed\n     * models.todo.completed = true;\n     *\n     * // ...before 1 second has passed `models.todo` is deleted\n     * // which cancels the debounced `todoChanges` call\n     * delete models.todo;\n     */\n    function debounce(func, wait, options) {\n      var args,\n        maxTimeoutId,\n        result,\n        stamp,\n        thisArg,\n        timeoutId,\n        trailingCall,\n        lastCalled = 0,\n        maxWait = false,\n        trailing = true;\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = wait < 0 ? 0 : +wait || 0;\n      if (options === true) {\n        var leading = true;\n        trailing = false;\n      } else if (isObject(options)) {\n        leading = !!options.leading;\n        maxWait = 'maxWait' in options && nativeMax(+options.maxWait || 0, wait);\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n      function cancel() {\n        if (timeoutId) {\n          clearTimeout(timeoutId);\n        }\n        if (maxTimeoutId) {\n          clearTimeout(maxTimeoutId);\n        }\n        lastCalled = 0;\n        maxTimeoutId = timeoutId = trailingCall = undefined;\n      }\n      function complete(isCalled, id) {\n        if (id) {\n          clearTimeout(id);\n        }\n        maxTimeoutId = timeoutId = trailingCall = undefined;\n        if (isCalled) {\n          lastCalled = now();\n          result = func.apply(thisArg, args);\n          if (!timeoutId && !maxTimeoutId) {\n            args = thisArg = undefined;\n          }\n        }\n      }\n      function delayed() {\n        var remaining = wait - (now() - stamp);\n        if (remaining <= 0 || remaining > wait) {\n          complete(trailingCall, maxTimeoutId);\n        } else {\n          timeoutId = setTimeout(delayed, remaining);\n        }\n      }\n      function maxDelayed() {\n        complete(trailing, timeoutId);\n      }\n      function debounced() {\n        args = arguments;\n        stamp = now();\n        thisArg = this;\n        trailingCall = trailing && (timeoutId || !leading);\n        if (maxWait === false) {\n          var leadingCall = leading && !timeoutId;\n        } else {\n          if (!maxTimeoutId && !leading) {\n            lastCalled = stamp;\n          }\n          var remaining = maxWait - (stamp - lastCalled),\n            isCalled = remaining <= 0 || remaining > maxWait;\n          if (isCalled) {\n            if (maxTimeoutId) {\n              maxTimeoutId = clearTimeout(maxTimeoutId);\n            }\n            lastCalled = stamp;\n            result = func.apply(thisArg, args);\n          } else if (!maxTimeoutId) {\n            maxTimeoutId = setTimeout(maxDelayed, remaining);\n          }\n        }\n        if (isCalled && timeoutId) {\n          timeoutId = clearTimeout(timeoutId);\n        } else if (!timeoutId && wait !== maxWait) {\n          timeoutId = setTimeout(delayed, wait);\n        }\n        if (leadingCall) {\n          isCalled = true;\n          result = func.apply(thisArg, args);\n        }\n        if (isCalled && !timeoutId && !maxTimeoutId) {\n          args = thisArg = undefined;\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      return debounced;\n    }\n\n    /**\n     * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n     * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(1);\n     * // => false\n     */\n    function isObject(value) {\n      // Avoid a V8 JIT bug in Chrome 19-20.\n      // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n      var type = typeof value;\n      return !!value && (type == 'object' || type == 'function');\n    }\n    return debounce;\n  }();\n\n  // ported lodash throttle function\n  var throttle = function (func, wait, options) {\n    var leading = true,\n      trailing = true;\n    if (options === false) {\n      leading = false;\n    } else if (typeof options === typeof {}) {\n      leading = 'leading' in options ? options.leading : leading;\n      trailing = 'trailing' in options ? options.trailing : trailing;\n    }\n    options = options || {};\n    options.leading = leading;\n    options.maxWait = wait;\n    options.trailing = trailing;\n    return debounce(func, wait, options);\n  };\n  var Navigator = function (element, options) {\n    this._init(element, options);\n  };\n  var extend = function () {\n    for (var i = 1; i < arguments.length; i++) {\n      for (var key in arguments[i]) {\n        if (arguments[i].hasOwnProperty(key)) {\n          arguments[0][key] = arguments[i][key];\n        }\n      }\n    }\n    return arguments[0];\n  };\n  var wid = function (elem) {\n    return elem.getBoundingClientRect().width;\n  };\n  var hei = function (elem) {\n    return elem.getBoundingClientRect().height;\n  };\n  Navigator.prototype = {\n    constructor: Navigator\n\n    /****************************\n      Main functions\n    ****************************/,\n\n    bb: function () {\n      var bb = this.cy.elements().boundingBox();\n      if (bb.w === 0 || bb.h === 0) {\n        return {\n          x1: 0,\n          x2: Infinity,\n          y1: 0,\n          y2: Infinity,\n          w: Infinity,\n          h: Infinity\n        }; // => hide interactive overlay\n      }\n      return bb;\n    },\n    _addCyListener: function (events, handler) {\n      this._cyListeners.push({\n        events: events,\n        handler: handler\n      });\n      this.cy.on(events, handler);\n    },\n    _removeCyListeners: function () {\n      var cy = this.cy;\n      this._cyListeners.forEach(function (l) {\n        cy.off(l.events, l.handler);\n      });\n      cy.offRender(this._onRenderHandler);\n    },\n    _init: function (cy, options) {\n      this._cyListeners = [];\n      this.$element = cy.container();\n      this.options = extend({}, defaults, options);\n      this.cy = cy;\n\n      // Cache bounding box\n      this.boundingBox = this.bb();\n\n      // Cache sizes\n      this.width = wid(this.$element);\n      this.height = hei(this.$element);\n\n      // Init components\n      this._initPanel();\n      this._initThumbnail();\n      this._initView();\n      this._initOverlay();\n    },\n    destroy: function () {\n      this._removeEventsHandling();\n\n      // If container is not created by navigator and its removal is prohibited\n      if (this.options.container && !this.options.removeCustomContainer) {\n        this.$panel.innerHTML = '';\n      } else {\n        this.$panel.parentElement.removeChild(this.$panel);\n      }\n    }\n\n    /****************************\n      Navigator elements functions\n    ****************************/\n\n    /*\n     * Used inner attributes\n     *\n     * w {number} width\n     * h {number} height\n     */,\n    _initPanel: function () {\n      var options = this.options;\n      if (options.container && typeof options.container === 'string' && options.container.length > 0) {\n        // to not break users which gives a jquery string selector\n        if (options.container.indexOf('#') !== -1) {\n          this.$panel = document.getElementById(options.container.replace('#', ''));\n        } else {\n          this.$panel = document.getElementsByClassName(options.container.replace('.', ''))[0];\n        }\n      } else {\n        this.$panel = document.createElement('div');\n        this.$panel.className = 'cytoscape-navigator';\n        document.body.appendChild(this.$panel);\n      }\n      this._setupPanel();\n      this._addCyListener('resize', this.resize.bind(this));\n    },\n    _setupPanel: function () {\n      // Cache sizes\n      this.panelWidth = wid(this.$panel);\n      this.panelHeight = hei(this.$panel);\n    }\n\n    /*\n     * Used inner attributes\n     *\n     * zoom {number}\n     * pan {object} - {x: 0, y: 0}\n     */,\n    _initThumbnail: function () {\n      // Create thumbnail\n      this.$thumbnail = document.createElement('img');\n\n      // Add thumbnail canvas to the DOM\n      this.$panel.appendChild(this.$thumbnail);\n\n      // Setup thumbnail\n      this._setupThumbnailSizes();\n      this._setupThumbnail();\n    },\n    _setupThumbnail: function () {\n      this._updateThumbnailImage();\n    },\n    _setupThumbnailSizes: function () {\n      // Update bounding box cache\n      this.boundingBox = this.bb();\n      this.thumbnailZoom = Math.min(this.panelHeight / this.boundingBox.h, this.panelWidth / this.boundingBox.w);\n\n      // Used on thumbnail generation\n      this.thumbnailPan = {\n        x: (this.panelWidth - this.thumbnailZoom * (this.boundingBox.x1 + this.boundingBox.x2)) / 2,\n        y: (this.panelHeight - this.thumbnailZoom * (this.boundingBox.y1 + this.boundingBox.y2)) / 2\n      };\n    }\n\n    // If bounding box has changed then update sizes\n    // Otherwise just update the thumbnail\n    ,\n    _checkThumbnailSizesAndUpdate: function () {\n      // Cache previous values\n      var _zoom = this.thumbnailZoom,\n        _pan_x = this.thumbnailPan.x,\n        _pan_y = this.thumbnailPan.y;\n      this._setupThumbnailSizes();\n      if (_zoom != this.thumbnailZoom || _pan_x != this.thumbnailPan.x || _pan_y != this.thumbnailPan.y) {\n        this._setupThumbnail();\n        this._setupView();\n      } else {\n        this._updateThumbnailImage();\n      }\n    }\n\n    /*\n     * Used inner attributes\n     *\n     * w {number} width\n     * h {number} height\n     * x {number}\n     * y {number}\n     * borderWidth {number}\n     * locked {boolean}\n     */,\n    _initView: function () {\n      this.$view = document.createElement('div');\n      this.$view.className = 'cytoscape-navigatorView';\n      this.$panel.appendChild(this.$view);\n      // Compute borders\n      this.viewBorderTop = parseInt(this.$view.style['border-top-width'], 10) || 0;\n      this.viewBorderRight = parseInt(this.$view.style['border-right-width'], 10) || 0;\n      this.viewBorderBottom = parseInt(this.$view.style['border-bottom-width'], 10) || 0;\n      this.viewBorderLeft = parseInt(this.$view.style['border-left-width'], 10) || 0;\n\n      // Abstract borders\n      this.viewBorderHorizontal = this.viewBorderLeft + this.viewBorderRight;\n      this.viewBorderVertical = this.viewBorderTop + this.viewBorderBottom;\n      this._setupView();\n\n      // Hook graph zoom and pan\n      this._addCyListener('zoom pan', this._setupView.bind(this));\n    },\n    _setupView: function () {\n      if (this.viewLocked) return;\n      var cyZoom = this.cy.zoom(),\n        cyPan = this.cy.pan();\n\n      // Horizontal computation\n      this.viewW = this.width / cyZoom * this.thumbnailZoom;\n      this.viewX = -cyPan.x * this.viewW / this.width + this.thumbnailPan.x - this.viewBorderLeft;\n\n      // Vertical computation\n      this.viewH = this.height / cyZoom * this.thumbnailZoom;\n      this.viewY = -cyPan.y * this.viewH / this.height + this.thumbnailPan.y - this.viewBorderTop;\n\n      // CSS view\n      this.$view.style['width'] = this.viewW + 'px';\n      this.$view.style['height'] = this.viewH + 'px';\n      this.$view.style['position'] = 'absolute';\n      this.$view.style['left'] = this.viewX + 'px';\n      this.$view.style['top'] = this.viewY + 'px';\n    }\n\n    /*\n     * Used inner attributes\n     *\n     * timeout {number} used to keep stable frame rate\n     * lastMoveStartTime {number}\n     * inMovement {boolean}\n     * hookPoint {object} {x: 0, y: 0}\n     */,\n    _initOverlay: function () {\n      // Used to capture mouse events\n      this.$overlay = document.createElement('div');\n      this.$overlay.className = 'cytoscape-navigatorOverlay';\n\n      // Add overlay to the DOM\n      this.$panel.appendChild(this.$overlay);\n\n      // Init some attributes\n      this.overlayHookPointX = 0;\n      this.overlayHookPointY = 0;\n\n      // Listen for events\n      this._initEventsHandling();\n    }\n\n    /****************************\n      Event handling functions\n    ****************************/,\n\n    resize: function () {\n      // Cache sizes\n      this.width = wid(this.$element);\n      this.height = hei(this.$element);\n      this._thumbnailSetup = false;\n      this._setupPanel();\n      this._checkThumbnailSizesAndUpdate();\n      this._setupView();\n    },\n    _initEventsHandling: function () {\n      var that = this,\n        eventsLocal = [\n        // Mouse events\n        'mousedown', 'mousewheel', 'DOMMouseScroll' // Mozilla specific event\n        // Touch events\n        , 'touchstart'],\n        eventsGlobal = ['mouseup', 'mouseout', 'mousemove'\n        // Touch events\n        , 'touchmove', 'touchend'];\n\n      // handle events and stop their propagation\n      var overlayListener = function (ev) {\n        // Touch events\n        if (ev.type == 'touchstart') {\n          // Will count as middle of View\n          Object.defineProperty(ev, 'offsetX', {\n            value: that.viewX + that.viewW / 2,\n            writable: true\n          });\n          Object.defineProperty(ev, 'offsetY', {\n            value: that.viewY + that.viewH / 2,\n            writable: true\n          });\n        }\n\n        // Normalize offset for browsers which do not provide that value\n        if (ev.offsetX === undefined || ev.offsetY === undefined) {\n          var rect = ev.target.getBoundingClientRect();\n          var targetOffset = {\n            top: rect.top + window.scrollY,\n            left: rect.left + window.scrollX\n          };\n          Object.defineProperty(ev, 'offsetX', {\n            value: ev.pageX - targetOffset.left,\n            writable: true\n          });\n          Object.defineProperty(ev, 'offsetY', {\n            value: ev.pageY - targetOffset.top,\n            writable: true\n          });\n        }\n        if (ev.type == 'mousedown' || ev.type == 'touchstart') {\n          that._eventMoveStart(ev);\n        } else if (ev.type == 'mousewheel' || ev.type == 'DOMMouseScroll') {\n          that._eventZoom(ev);\n        }\n\n        // Prevent default and propagation\n        // Don't use peventPropagation as it breaks mouse events\n        return false;\n      };\n\n      // Hook global events\n      var globalListener = function (ev) {\n        // Do not make any computations if it is has no effect on Navigator\n        if (!that.overlayInMovement) return;\n\n        // Touch events\n        if (ev.type == 'touchend') {\n          // Will count as middle of View\n          Object.defineProperty(ev, 'offsetX', {\n            value: that.viewX + that.viewW / 2,\n            writable: true\n          });\n          Object.defineProperty(ev, 'offsetY', {\n            value: that.viewY + that.viewH / 2,\n            writable: true\n          });\n        } else if (ev.type == 'touchmove') {\n          // Hack - we take in account only first touch\n          Object.defineProperty(ev, 'pageX', {\n            value: ev.originalEvent.touches[0].pageX,\n            writable: true\n          });\n          Object.defineProperty(ev, 'pageY', {\n            value: ev.originalEvent.touches[0].pageY,\n            writable: true\n          });\n        }\n\n        // Normalize offset for browsers which do not provide that value\n        if (ev.offsetX === undefined || ev.offsetY === undefined) {\n          var rect = ev.target.getBoundingClientRect();\n          var targetOffset = {\n            top: rect.top + window.scrollY,\n            left: rect.left + window.scrollX\n          };\n          Object.defineProperty(ev, 'offsetX', {\n            value: ev.pageX - targetOffset.left,\n            writable: true\n          });\n          Object.defineProperty(ev, 'offsetY', {\n            value: ev.pageY - targetOffset.top,\n            writable: true\n          });\n        }\n\n        // Translate global events into local coordinates\n        if (ev.target !== that.$overlay) {\n          var rect = ev.target.getBoundingClientRect();\n          var rect2 = that.$overlay.getBoundingClientRect();\n          var targetOffset = {\n            top: rect.top + window.scrollY,\n            left: rect.left + window.scrollX\n          };\n          var overlayOffset = {\n            top: rect2.top + window.scrollY,\n            left: rect2.left + window.scrollX\n          };\n          if (targetOffset && overlayOffset) {\n            Object.defineProperty(ev, 'offsetX', {\n              value: ev.offsetX - overlayOffset.left + targetOffset.left,\n              writable: true\n            });\n            Object.defineProperty(ev, 'offsetY', {\n              value: ev.offsetY - overlayOffset.top + targetOffset.top,\n              writable: true\n            });\n          } else {\n            return false;\n          }\n        }\n        if (ev.type == 'mousemove' || ev.type == 'touchmove') {\n          that._eventMove(ev);\n        } else if (ev.type == 'mouseup' || ev.type == 'touchend') {\n          that._eventMoveEnd(ev);\n        }\n\n        // Prevent default and propagation\n        // Don't use peventPropagation as it breaks mouse events\n        return false;\n      };\n      for (var i = 0; i < eventsLocal.length; i++) {\n        this.$overlay.addEventListener(eventsLocal[i], overlayListener, false);\n      }\n      for (var i = 0; i < eventsGlobal.length; i++) {\n        window.addEventListener(eventsGlobal[i], globalListener, false);\n      }\n      this._removeEventsHandling = function () {\n        for (var i = 0; i < eventsLocal.length; i++) {\n          this.$overlay.removeEventListener(eventsLocal[i], overlayListener);\n        }\n        for (var i = 0; i < eventsGlobal.length; i++) {\n          window.removeEventListener(eventsGlobal[i], globalListener);\n        }\n      };\n    },\n    _eventMoveStart: function (ev) {\n      var now = new Date().getTime();\n\n      // Check if it was double click\n      if (this.overlayLastMoveStartTime && this.overlayLastMoveStartTime + this.options.dblClickDelay > now) {\n        // Reset lastMoveStartTime\n        this.overlayLastMoveStartTime = 0;\n        // Enable View in order to move it to the center\n        this.overlayInMovement = true;\n\n        // Set hook point as View center\n        this.overlayHookPointX = this.viewW / 2;\n        this.overlayHookPointY = this.viewH / 2;\n\n        // Move View to start point\n        if (this.options.viewLiveFramerate !== false) {\n          this._eventMove({\n            offsetX: this.panelWidth / 2,\n            offsetY: this.panelHeight / 2\n          });\n        } else {\n          this._eventMoveEnd({\n            offsetX: this.panelWidth / 2,\n            offsetY: this.panelHeight / 2\n          });\n        }\n\n        // View should be inactive as we don't want to move it right after double click\n        this.overlayInMovement = false;\n      }\n      // This is a single click\n      // Take care as single click happens before double click 2 times\n      else {\n        this.overlayLastMoveStartTime = now;\n        this.overlayInMovement = true;\n        // Lock view moving caused by cy events\n        this.viewLocked = true;\n\n        // if event started in View\n        if (ev.offsetX >= this.viewX && ev.offsetX <= this.viewX + this.viewW && ev.offsetY >= this.viewY && ev.offsetY <= this.viewY + this.viewH) {\n          this.overlayHookPointX = ev.offsetX - this.viewX;\n          this.overlayHookPointY = ev.offsetY - this.viewY;\n        }\n        // if event started in Thumbnail (outside of View)\n        else {\n          // Set hook point as View center\n          this.overlayHookPointX = this.viewW / 2;\n          this.overlayHookPointY = this.viewH / 2;\n\n          // Move View to start point\n          this._eventMove(ev);\n        }\n      }\n    },\n    _eventMove: function (ev) {\n      var that = this;\n      this._checkMousePosition(ev);\n\n      // break if it is useless event\n      if (!this.overlayInMovement) {\n        return;\n      }\n\n      // Update cache\n      this.viewX = ev.offsetX - this.overlayHookPointX;\n      this.viewY = ev.offsetY - this.overlayHookPointY;\n\n      // Update view position\n      this.$view.style['left'] = this.viewX + 'px';\n      this.$view.style['top'] = this.viewY + 'px';\n\n      // Move Cy\n      if (this.options.viewLiveFramerate !== false) {\n        // trigger instantly\n        if (this.options.viewLiveFramerate == 0) {\n          this._moveCy();\n        }\n        // trigger less often than frame rate\n        else if (!this.overlayTimeout) {\n          // Set a timeout for graph movement\n          this.overlayTimeout = setTimeout(function () {\n            that._moveCy();\n            that.overlayTimeout = false;\n          }, 1000 / this.options.viewLiveFramerate);\n        }\n      }\n    },\n    _checkMousePosition: function (ev) {\n      // If mouse in over View\n      if (ev.offsetX > this.viewX && ev.offsetX < this.viewX + this.viewBorderHorizontal + this.viewW && ev.offsetY > this.viewY && ev.offsetY < this.viewY + this.viewBorderVertical + this.viewH) {\n        this.$panel.classList.add('mouseover-view');\n      } else {\n        this.$panel.classList.remove('mouseover-view');\n      }\n    },\n    _eventMoveEnd: function (ev) {\n      // Unlock view changing caused by graph events\n      this.viewLocked = false;\n\n      // Remove class when mouse is not over Navigator\n      this.$panel.classList.remove('mouseover-view');\n      if (!this.overlayInMovement) {\n        return;\n      }\n\n      // Trigger one last move\n      this._eventMove(ev);\n\n      // If mode is not live then move graph on drag end\n      if (this.options.viewLiveFramerate === false) {\n        this._moveCy();\n      }\n\n      // Stop movement permission\n      this.overlayInMovement = false;\n    },\n    _eventZoom: function (ev) {\n      var ev2 = extend({}, ev.originalEvent);\n      var delta = ev.wheelDeltaY / 1000 || ev.wheelDelta / 1000 || ev.detail / -32 || ev2.wheelDeltaY / 1000 || ev2.wheelDelta / 1000 || ev2.detail / -32;\n      var zoomRate = Math.pow(10, delta),\n        mousePosition = {\n          left: ev.offsetX,\n          top: ev.offsetY\n        };\n      if (this.cy.zoomingEnabled()) {\n        this._zoomCy(zoomRate, mousePosition);\n      }\n    },\n    _updateThumbnailImage: function () {\n      var that = this;\n      if (this._thumbnailUpdating) {\n        return;\n      }\n      this._thumbnailUpdating = true;\n      var render = function () {\n        that._checkThumbnailSizesAndUpdate();\n        that._setupView();\n        var $img = that.$thumbnail;\n        var img = $img;\n        var w = that.panelWidth;\n        var h = that.panelHeight;\n        var bb = that.boundingBox;\n        var zoom = Math.min(w / bb.w, h / bb.h);\n        var png = that.cy.png({\n          full: true,\n          scale: zoom,\n          maxHeight: h,\n          maxWidth: w\n        });\n        if (png.indexOf('image/png') < 0) {\n          img.removeAttribute('src');\n        } else {\n          img.setAttribute('src', png);\n        }\n        var translate = {\n          x: (w - zoom * bb.w) / 2,\n          y: (h - zoom * bb.h) / 2\n        };\n        $img.style['position'] = 'absolute';\n        $img.style['left'] = translate.x + 'px';\n        $img.style['top'] = translate.y + 'px';\n      };\n      this._onRenderHandler = throttle(render, that.options.rerenderDelay);\n      this.cy.onRender(this._onRenderHandler);\n    }\n\n    /****************************\n      Navigator view moving\n    ****************************/,\n\n    _moveCy: function () {\n      this.cy.pan({\n        x: -(this.viewX + this.viewBorderLeft - this.thumbnailPan.x) * this.width / this.viewW,\n        y: -(this.viewY + this.viewBorderLeft - this.thumbnailPan.y) * this.height / this.viewH\n      });\n    }\n\n    /**\n     * Zooms graph.\n     *\n     * @this {cytoscapeNavigator}\n     * @param {number} zoomRate The zoom rate value. 1 is 100%.\n     */,\n    _zoomCy: function (zoomRate, zoomCenterRaw) {\n      var zoomCenter,\n        isZoomCenterInView = false;\n      zoomCenter = {\n        x: this.width / 2,\n        y: this.height / 2\n      };\n      this.cy.zoom({\n        level: this.cy.zoom() * zoomRate,\n        renderedPosition: zoomCenter\n      });\n    }\n  };\n\n  // registers the extension on a cytoscape lib ref\n  var register = function (cytoscape) {\n    if (!cytoscape) {\n      return;\n    } // can't register if cytoscape unspecified\n\n    cytoscape('core', 'navigator', function (options) {\n      var cy = this;\n      return new Navigator(cy, options);\n    });\n  };\n  if (typeof module !== 'undefined' && module.exports) {\n    // expose as a commonjs module\n    module.exports = function (cytoscape) {\n      register(cytoscape);\n    };\n  } else if (typeof define !== 'undefined' && define.amd) {\n    // expose as an amd/requirejs module\n    define('cytoscape-navigator', function () {\n      return register;\n    });\n  }\n  if (typeof cytoscape !== 'undefined') {\n    // expose to global cytoscape (i.e. window.cytoscape)\n    register(cytoscape);\n  }\n})();","map":{"version":3,"names":["defaults","container","viewLiveFramerate","dblClickDelay","removeCustomContainer","rerenderDelay","debounce","FUNC_ERROR_TEXT","nativeMax","Math","max","nativeNow","Date","now","getTime","func","wait","options","args","maxTimeoutId","result","stamp","thisArg","timeoutId","trailingCall","lastCalled","maxWait","trailing","TypeError","leading","isObject","cancel","clearTimeout","undefined","complete","isCalled","id","apply","delayed","remaining","setTimeout","maxDelayed","debounced","arguments","leadingCall","value","type","throttle","Navigator","element","_init","extend","i","length","key","hasOwnProperty","wid","elem","getBoundingClientRect","width","hei","height","prototype","constructor","bb","cy","elements","boundingBox","w","h","x1","x2","Infinity","y1","y2","_addCyListener","events","handler","_cyListeners","push","on","_removeCyListeners","forEach","l","off","offRender","_onRenderHandler","$element","_initPanel","_initThumbnail","_initView","_initOverlay","destroy","_removeEventsHandling","$panel","innerHTML","parentElement","removeChild","indexOf","document","getElementById","replace","getElementsByClassName","createElement","className","body","appendChild","_setupPanel","resize","bind","panelWidth","panelHeight","$thumbnail","_setupThumbnailSizes","_setupThumbnail","_updateThumbnailImage","thumbnailZoom","min","thumbnailPan","x","y","_checkThumbnailSizesAndUpdate","_zoom","_pan_x","_pan_y","_setupView","$view","viewBorderTop","parseInt","style","viewBorderRight","viewBorderBottom","viewBorderLeft","viewBorderHorizontal","viewBorderVertical","viewLocked","cyZoom","zoom","cyPan","pan","viewW","viewX","viewH","viewY","$overlay","overlayHookPointX","overlayHookPointY","_initEventsHandling","_thumbnailSetup","that","eventsLocal","eventsGlobal","overlayListener","ev","Object","defineProperty","writable","offsetX","offsetY","rect","target","targetOffset","top","window","scrollY","left","scrollX","pageX","pageY","_eventMoveStart","_eventZoom","globalListener","overlayInMovement","originalEvent","touches","rect2","overlayOffset","_eventMove","_eventMoveEnd","addEventListener","removeEventListener","overlayLastMoveStartTime","_checkMousePosition","_moveCy","overlayTimeout","classList","add","remove","ev2","delta","wheelDeltaY","wheelDelta","detail","zoomRate","pow","mousePosition","zoomingEnabled","_zoomCy","_thumbnailUpdating","render","$img","img","png","full","scale","maxHeight","maxWidth","removeAttribute","setAttribute","translate","onRender","zoomCenterRaw","zoomCenter","isZoomCenterInView","level","renderedPosition","register","cytoscape","module","exports","define","amd"],"sources":["/home/saharsh/digital-twins-explorer/client/node_modules/cytoscape-navigator/cytoscape-navigator.js"],"sourcesContent":[";(function(){ 'use strict';\n\n  var defaults = {\n      container: false // can be a HTML or jQuery element or jQuery selector\n    , viewLiveFramerate: 0 // set false to update graph pan only on drag end; set 0 to do it instantly; set a number (frames per second) to update not more than N times per second\n    , dblClickDelay: 200 // milliseconds\n    , removeCustomContainer: true // destroy the container specified by user on plugin destroy\n    , rerenderDelay: 500 // ms to throttle rerender updates to the panzoom for performance\n  };\n\n  var debounce = (function(){\n    /**\n     * lodash 3.1.1 (Custom Build) <https://lodash.com/>\n     * Build: `lodash modern modularize exports=\"npm\" -o ./`\n     * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n     * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n     * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n     * Available under MIT license <https://lodash.com/license>\n     */\n    /** Used as the `TypeError` message for \"Functions\" methods. */\n    var FUNC_ERROR_TEXT = 'Expected a function';\n\n    /* Native method references for those with the same name as other `lodash` methods. */\n    var nativeMax = Math.max,\n        nativeNow = Date.now;\n\n    /**\n     * Gets the number of milliseconds that have elapsed since the Unix epoch\n     * (1 January 1970 00:00:00 UTC).\n     *\n     * @static\n     * @memberOf _\n     * @category Date\n     * @example\n     *\n     * _.defer(function(stamp) {\n     *   console.log(_.now() - stamp);\n     * }, _.now());\n     * // => logs the number of milliseconds it took for the deferred function to be invoked\n     */\n    var now = nativeNow || function() {\n      return new Date().getTime();\n    };\n\n    /**\n     * Creates a debounced function that delays invoking `func` until after `wait`\n     * milliseconds have elapsed since the last time the debounced function was\n     * invoked. The debounced function comes with a `cancel` method to cancel\n     * delayed invocations. Provide an options object to indicate that `func`\n     * should be invoked on the leading and/or trailing edge of the `wait` timeout.\n     * Subsequent calls to the debounced function return the result of the last\n     * `func` invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is invoked\n     * on the trailing edge of the timeout only if the the debounced function is\n     * invoked more than once during the `wait` timeout.\n     *\n     * See [David Corbacho's article](http://drupalmotion.com/article/debounce-and-throttle-visual-explanation)\n     * for details over the differences between `_.debounce` and `_.throttle`.\n     *\n     * @static\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to debounce.\n     * @param {number} [wait=0] The number of milliseconds to delay.\n     * @param {Object} [options] The options object.\n     * @param {boolean} [options.leading=false] Specify invoking on the leading\n     *  edge of the timeout.\n     * @param {number} [options.maxWait] The maximum time `func` is allowed to be\n     *  delayed before it's invoked.\n     * @param {boolean} [options.trailing=true] Specify invoking on the trailing\n     *  edge of the timeout.\n     * @returns {Function} Returns the new debounced function.\n     * @example\n     *\n     * // avoid costly calculations while the window size is in flux\n     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n     *\n     * // invoke `sendMail` when the click event is fired, debouncing subsequent calls\n     * jQuery('#postbox').on('click', _.debounce(sendMail, 300, {\n     *   'leading': true,\n     *   'trailing': false\n     * }));\n     *\n     * // ensure `batchLog` is invoked once after 1 second of debounced calls\n     * var source = new EventSource('/stream');\n     * jQuery(source).on('message', _.debounce(batchLog, 250, {\n     *   'maxWait': 1000\n     * }));\n     *\n     * // cancel a debounced call\n     * var todoChanges = _.debounce(batchLog, 1000);\n     * Object.observe(models.todo, todoChanges);\n     *\n     * Object.observe(models, function(changes) {\n     *   if (_.find(changes, { 'user': 'todo', 'type': 'delete'})) {\n     *     todoChanges.cancel();\n     *   }\n     * }, ['delete']);\n     *\n     * // ...at some point `models.todo` is changed\n     * models.todo.completed = true;\n     *\n     * // ...before 1 second has passed `models.todo` is deleted\n     * // which cancels the debounced `todoChanges` call\n     * delete models.todo;\n     */\n    function debounce(func, wait, options) {\n      var args,\n          maxTimeoutId,\n          result,\n          stamp,\n          thisArg,\n          timeoutId,\n          trailingCall,\n          lastCalled = 0,\n          maxWait = false,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = wait < 0 ? 0 : (+wait || 0);\n      if (options === true) {\n        var leading = true;\n        trailing = false;\n      } else if (isObject(options)) {\n        leading = !!options.leading;\n        maxWait = 'maxWait' in options && nativeMax(+options.maxWait || 0, wait);\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n\n      function cancel() {\n        if (timeoutId) {\n          clearTimeout(timeoutId);\n        }\n        if (maxTimeoutId) {\n          clearTimeout(maxTimeoutId);\n        }\n        lastCalled = 0;\n        maxTimeoutId = timeoutId = trailingCall = undefined;\n      }\n\n      function complete(isCalled, id) {\n        if (id) {\n          clearTimeout(id);\n        }\n        maxTimeoutId = timeoutId = trailingCall = undefined;\n        if (isCalled) {\n          lastCalled = now();\n          result = func.apply(thisArg, args);\n          if (!timeoutId && !maxTimeoutId) {\n            args = thisArg = undefined;\n          }\n        }\n      }\n\n      function delayed() {\n        var remaining = wait - (now() - stamp);\n        if (remaining <= 0 || remaining > wait) {\n          complete(trailingCall, maxTimeoutId);\n        } else {\n          timeoutId = setTimeout(delayed, remaining);\n        }\n      }\n\n      function maxDelayed() {\n        complete(trailing, timeoutId);\n      }\n\n      function debounced() {\n        args = arguments;\n        stamp = now();\n        thisArg = this;\n        trailingCall = trailing && (timeoutId || !leading);\n\n        if (maxWait === false) {\n          var leadingCall = leading && !timeoutId;\n        } else {\n          if (!maxTimeoutId && !leading) {\n            lastCalled = stamp;\n          }\n          var remaining = maxWait - (stamp - lastCalled),\n              isCalled = remaining <= 0 || remaining > maxWait;\n\n          if (isCalled) {\n            if (maxTimeoutId) {\n              maxTimeoutId = clearTimeout(maxTimeoutId);\n            }\n            lastCalled = stamp;\n            result = func.apply(thisArg, args);\n          }\n          else if (!maxTimeoutId) {\n            maxTimeoutId = setTimeout(maxDelayed, remaining);\n          }\n        }\n        if (isCalled && timeoutId) {\n          timeoutId = clearTimeout(timeoutId);\n        }\n        else if (!timeoutId && wait !== maxWait) {\n          timeoutId = setTimeout(delayed, wait);\n        }\n        if (leadingCall) {\n          isCalled = true;\n          result = func.apply(thisArg, args);\n        }\n        if (isCalled && !timeoutId && !maxTimeoutId) {\n          args = thisArg = undefined;\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      return debounced;\n    }\n\n    /**\n     * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n     * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(1);\n     * // => false\n     */\n    function isObject(value) {\n      // Avoid a V8 JIT bug in Chrome 19-20.\n      // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n      var type = typeof value;\n      return !!value && (type == 'object' || type == 'function');\n    }\n\n    return debounce;\n\n  })();\n\n  // ported lodash throttle function\n  var throttle = function( func, wait, options ){\n    var leading = true,\n        trailing = true;\n\n    if( options === false ){\n      leading = false;\n    } else if( typeof options === typeof {} ){\n      leading = 'leading' in options ? options.leading : leading;\n      trailing = 'trailing' in options ? options.trailing : trailing;\n    }\n    options = options || {};\n    options.leading = leading;\n    options.maxWait = wait;\n    options.trailing = trailing;\n\n    return debounce( func, wait, options );\n  };\n\n  var Navigator = function ( element, options ) {\n    this._init(element, options)\n  };\n\n  var extend = function() {\n    for(var i = 1; i < arguments.length; i++) {\n      for(var key in arguments[i]) {\n        if(arguments[i].hasOwnProperty(key)) {\n          arguments[0][key] = arguments[i][key];\n        }\n      }\n    }\n    return arguments[0];\n  };\n\n  var wid = function(elem) {\n    return elem.getBoundingClientRect().width;\n  };\n\n  var hei = function(elem) {\n    return elem.getBoundingClientRect().height;\n  };\n\n  Navigator.prototype = {\n\n    constructor: Navigator\n\n  /****************************\n    Main functions\n  ****************************/\n\n  , bb: function(){\n    var bb = this.cy.elements().boundingBox()\n\n    if( bb.w === 0 || bb.h === 0 ){\n      return {\n        x1: 0,\n        x2: Infinity,\n        y1: 0,\n        y2: Infinity,\n        w: Infinity,\n        h: Infinity\n      } // => hide interactive overlay\n    }\n\n    return bb\n  }\n\n  , _addCyListener: function(events, handler){\n    this._cyListeners.push({\n      events: events,\n      handler: handler\n    })\n\n    this.cy.on(events, handler)\n  }\n\n  , _removeCyListeners: function(){\n    var cy = this.cy\n\n    this._cyListeners.forEach(function(l){\n      cy.off(l.events, l.handler)\n    })\n\n    cy.offRender(this._onRenderHandler)\n  }\n\n  , _init: function ( cy, options ) {\n      this._cyListeners = []\n\n      this.$element = cy.container()\n      this.options = extend({}, defaults, options)\n\n      this.cy = cy\n\n      // Cache bounding box\n      this.boundingBox = this.bb()\n\n      // Cache sizes\n      this.width = wid(this.$element);\n      this.height = hei(this.$element)\n\n      // Init components\n      this._initPanel()\n      this._initThumbnail()\n      this._initView()\n      this._initOverlay()\n    }\n\n  , destroy: function () {\n      this._removeEventsHandling();\n\n      // If container is not created by navigator and its removal is prohibited\n      if (this.options.container && !this.options.removeCustomContainer) {\n        this.$panel.innerHTML = '';\n      } else {\n        this.$panel.parentElement.removeChild(this.$panel);\n      }\n    }\n\n  /****************************\n    Navigator elements functions\n  ****************************/\n\n    /*\n     * Used inner attributes\n     *\n     * w {number} width\n     * h {number} height\n     */\n  , _initPanel: function () {\n      var options = this.options\n      if(options.container && typeof options.container === 'string' && options.container.length > 0) {\n        // to not break users which gives a jquery string selector\n        if (options.container.indexOf('#') !== -1) {\n          this.$panel = document.getElementById(options.container.replace('#', ''));\n        } else {\n          this.$panel = document.getElementsByClassName(options.container.replace('.', ''))[0];\n        } \n      } else {\n        this.$panel = document.createElement('div');\n        this.$panel.className = 'cytoscape-navigator';\n        document.body.appendChild(this.$panel);\n      }\n      this._setupPanel()\n      this._addCyListener('resize', this.resize.bind(this))\n    }\n\n  , _setupPanel: function () {\n      // Cache sizes\n      this.panelWidth = wid(this.$panel);\n      this.panelHeight = hei(this.$panel);\n    }\n\n    /*\n     * Used inner attributes\n     *\n     * zoom {number}\n     * pan {object} - {x: 0, y: 0}\n     */\n  , _initThumbnail: function () {\n      // Create thumbnail\n      this.$thumbnail = document.createElement('img');\n\n      // Add thumbnail canvas to the DOM\n      this.$panel.appendChild(this.$thumbnail);\n\n      // Setup thumbnail\n      this._setupThumbnailSizes()\n      this._setupThumbnail()\n    }\n\n  , _setupThumbnail: function () {\n      this._updateThumbnailImage()\n    }\n\n  , _setupThumbnailSizes: function () {\n      // Update bounding box cache\n      this.boundingBox = this.bb()\n\n      this.thumbnailZoom = Math.min(this.panelHeight / this.boundingBox.h, this.panelWidth / this.boundingBox.w)\n\n      // Used on thumbnail generation\n      this.thumbnailPan = {\n        x: (this.panelWidth - this.thumbnailZoom * (this.boundingBox.x1 + this.boundingBox.x2))/2\n      , y: (this.panelHeight - this.thumbnailZoom * (this.boundingBox.y1 + this.boundingBox.y2))/2\n      }\n    }\n\n    // If bounding box has changed then update sizes\n    // Otherwise just update the thumbnail\n  , _checkThumbnailSizesAndUpdate: function () {\n      // Cache previous values\n      var _zoom = this.thumbnailZoom\n        , _pan_x = this.thumbnailPan.x\n        , _pan_y = this.thumbnailPan.y\n\n      this._setupThumbnailSizes()\n\n      if (_zoom != this.thumbnailZoom || _pan_x != this.thumbnailPan.x || _pan_y != this.thumbnailPan.y) {\n        this._setupThumbnail()\n        this._setupView()\n      } else {\n        this._updateThumbnailImage()\n      }\n    }\n\n    /*\n     * Used inner attributes\n     *\n     * w {number} width\n     * h {number} height\n     * x {number}\n     * y {number}\n     * borderWidth {number}\n     * locked {boolean}\n     */\n  , _initView: function () {\n      this.$view = document.createElement('div');\n      this.$view.className = 'cytoscape-navigatorView';\n      this.$panel.appendChild(this.$view)\n      // Compute borders\n      this.viewBorderTop = parseInt(this.$view.style['border-top-width'], 10) || 0;\n      this.viewBorderRight = parseInt(this.$view.style['border-right-width'], 10) || 0;\n      this.viewBorderBottom = parseInt(this.$view.style['border-bottom-width'], 10) || 0;\n      this.viewBorderLeft = parseInt(this.$view.style['border-left-width'], 10) || 0;\n      \n      // Abstract borders\n      this.viewBorderHorizontal = this.viewBorderLeft + this.viewBorderRight\n      this.viewBorderVertical = this.viewBorderTop + this.viewBorderBottom\n\n      this._setupView()\n\n      // Hook graph zoom and pan\n      this._addCyListener('zoom pan', this._setupView.bind(this))\n    }\n\n  , _setupView: function () {\n      if (this.viewLocked)\n        return\n\n      var cyZoom = this.cy.zoom()\n        , cyPan = this.cy.pan()\n\n      // Horizontal computation\n      this.viewW = this.width / cyZoom * this.thumbnailZoom\n      this.viewX = -cyPan.x * this.viewW / this.width + this.thumbnailPan.x - this.viewBorderLeft\n\n      // Vertical computation\n      this.viewH = this.height / cyZoom * this.thumbnailZoom\n      this.viewY = -cyPan.y * this.viewH / this.height + this.thumbnailPan.y - this.viewBorderTop\n\n      // CSS view\n      this.$view.style['width'] = this.viewW + 'px';\n      this.$view.style['height'] = this.viewH + 'px';\n      this.$view.style['position'] = 'absolute';\n      this.$view.style['left'] = this.viewX + 'px';\n      this.$view.style['top'] = this.viewY + 'px';\n    }\n\n    /*\n     * Used inner attributes\n     *\n     * timeout {number} used to keep stable frame rate\n     * lastMoveStartTime {number}\n     * inMovement {boolean}\n     * hookPoint {object} {x: 0, y: 0}\n     */\n  , _initOverlay: function () {\n      // Used to capture mouse events\n      this.$overlay = document.createElement('div');\n      this.$overlay.className = 'cytoscape-navigatorOverlay';\n\n      // Add overlay to the DOM\n      this.$panel.appendChild(this.$overlay)\n\n      // Init some attributes\n      this.overlayHookPointX = 0;\n      this.overlayHookPointY = 0;\n\n      // Listen for events\n      this._initEventsHandling()\n    }\n\n  /****************************\n    Event handling functions\n  ****************************/\n\n  , resize: function () {\n      // Cache sizes\n      this.width = wid(this.$element);\n      this.height = hei(this.$element);\n      this._thumbnailSetup = false\n      this._setupPanel()\n      this._checkThumbnailSizesAndUpdate()\n      this._setupView()\n    }\n\n  , _initEventsHandling: function () {\n      var that = this\n        , eventsLocal = [\n        // Mouse events\n          'mousedown'\n        , 'mousewheel'\n        , 'DOMMouseScroll' // Mozilla specific event\n        // Touch events\n        , 'touchstart'\n        ]\n        , eventsGlobal = [\n          'mouseup'\n        , 'mouseout'\n        , 'mousemove'\n        // Touch events\n        , 'touchmove'\n        , 'touchend'\n        ]\n\n      // handle events and stop their propagation\n      var overlayListener = function (ev) {\n        // Touch events\n        if (ev.type == 'touchstart') {\n          // Will count as middle of View\n          Object.defineProperty(ev, 'offsetX', {\n            value: that.viewX + that.viewW / 2,\n            writable: true\n          });\n          Object.defineProperty(ev, 'offsetY', {\n            value: that.viewY + that.viewH / 2,\n            writable: true\n          });\n        }\n\n        // Normalize offset for browsers which do not provide that value\n        if (ev.offsetX === undefined || ev.offsetY === undefined) {\n          var rect = ev.target.getBoundingClientRect();\n          var targetOffset = { \n            top: rect.top + window.scrollY, \n            left: rect.left + window.scrollX, \n          };\n          Object.defineProperty(ev, 'offsetX', {\n            value: ev.pageX - targetOffset.left,\n            writable: true\n          });\n          Object.defineProperty(ev, 'offsetY', {\n            value: ev.pageY - targetOffset.top,\n            writable: true\n          });\n        }\n\n        if (ev.type == 'mousedown' || ev.type == 'touchstart') {\n          that._eventMoveStart(ev)\n        } else if (ev.type == 'mousewheel' || ev.type == 'DOMMouseScroll') {\n          that._eventZoom(ev)\n        }\n\n        // Prevent default and propagation\n        // Don't use peventPropagation as it breaks mouse events\n        return false;\n      };\n\n      // Hook global events\n      var globalListener = function (ev) {\n\n        // Do not make any computations if it is has no effect on Navigator\n        if (!that.overlayInMovement)\n          return;\n\n        // Touch events\n        if (ev.type == 'touchend') {\n          // Will count as middle of View\n          Object.defineProperty(ev, 'offsetX', {\n            value: that.viewX + that.viewW / 2,\n            writable: true\n          });\n          Object.defineProperty(ev, 'offsetY', {\n            value: that.viewY + that.viewH / 2,\n            writable: true\n          });\n        } else if (ev.type == 'touchmove') {\n          // Hack - we take in account only first touch\n          Object.defineProperty(ev, 'pageX', {\n            value: ev.originalEvent.touches[0].pageX,\n            writable: true\n          });\n          Object.defineProperty(ev, 'pageY', {\n            value: ev.originalEvent.touches[0].pageY,\n            writable: true\n          });\n        }\n\n        // Normalize offset for browsers which do not provide that value\n        if (ev.offsetX === undefined || ev.offsetY === undefined) {\n          var rect = ev.target.getBoundingClientRect();\n          var targetOffset = { \n            top: rect.top + window.scrollY, \n            left: rect.left + window.scrollX, \n          };\n          Object.defineProperty(ev, 'offsetX', {\n            value: ev.pageX - targetOffset.left,\n            writable: true\n          });\n          Object.defineProperty(ev, 'offsetY', {\n            value: ev.pageY - targetOffset.top,\n            writable: true\n          });\n        }\n\n        // Translate global events into local coordinates\n        if (ev.target !== that.$overlay) {\n          var rect = ev.target.getBoundingClientRect();\n          var rect2 = that.$overlay.getBoundingClientRect();\n          var targetOffset = { \n            top: rect.top + window.scrollY, \n            left: rect.left + window.scrollX, \n          };\n          var overlayOffset = { \n            top: rect2.top + window.scrollY, \n            left: rect2.left + window.scrollX, \n          };\n          \n          if(targetOffset && overlayOffset) {\n            Object.defineProperty(ev, 'offsetX', {\n              value: ev.offsetX - overlayOffset.left + targetOffset.left,\n              writable: true\n            });\n            Object.defineProperty(ev, 'offsetY', {\n              value: ev.offsetY - overlayOffset.top + targetOffset.top,\n              writable: true\n            });\n          } else {\n            return false;\n          }\n        }\n\n        if (ev.type == 'mousemove' || ev.type == 'touchmove') {\n          that._eventMove(ev)\n        } else if (ev.type == 'mouseup' || ev.type == 'touchend') {\n          that._eventMoveEnd(ev)\n        }\n\n        // Prevent default and propagation\n        // Don't use peventPropagation as it breaks mouse events\n        return false;\n      };\n\n      for (var i = 0; i < eventsLocal.length; i++) {\n        this.$overlay.addEventListener(eventsLocal[i], overlayListener, false);\n      }\n\n      for (var i = 0; i < eventsGlobal.length; i++) {\n        window.addEventListener(eventsGlobal[i], globalListener, false);\n      }\n\n      this._removeEventsHandling = function(){\n\n        for (var i = 0; i < eventsLocal.length; i++) {\n          this.$overlay.removeEventListener(eventsLocal[i], overlayListener);\n        }\n\n        for (var i = 0; i < eventsGlobal.length; i++) {\n          window.removeEventListener(eventsGlobal[i], globalListener);\n        }\n      }\n    }\n\n  , _eventMoveStart: function (ev) {\n      var now = new Date().getTime()\n\n      // Check if it was double click\n      if (this.overlayLastMoveStartTime\n        && this.overlayLastMoveStartTime + this.options.dblClickDelay > now) {\n        // Reset lastMoveStartTime\n        this.overlayLastMoveStartTime = 0\n        // Enable View in order to move it to the center\n        this.overlayInMovement = true\n\n        // Set hook point as View center\n        this.overlayHookPointX = this.viewW / 2\n        this.overlayHookPointY = this.viewH / 2\n\n        // Move View to start point\n        if (this.options.viewLiveFramerate !== false) {\n          this._eventMove({\n            offsetX: this.panelWidth / 2\n          , offsetY: this.panelHeight / 2\n          })\n        } else {\n          this._eventMoveEnd({\n            offsetX: this.panelWidth / 2\n          , offsetY: this.panelHeight / 2\n          })\n        }\n\n        // View should be inactive as we don't want to move it right after double click\n        this.overlayInMovement = false\n      }\n      // This is a single click\n      // Take care as single click happens before double click 2 times\n      else {\n        this.overlayLastMoveStartTime = now\n        this.overlayInMovement = true\n        // Lock view moving caused by cy events\n        this.viewLocked = true\n\n        // if event started in View\n        if (ev.offsetX >= this.viewX && ev.offsetX <= this.viewX + this.viewW\n          && ev.offsetY >= this.viewY && ev.offsetY <= this.viewY + this.viewH\n        ) {\n          this.overlayHookPointX = ev.offsetX - this.viewX\n          this.overlayHookPointY = ev.offsetY - this.viewY\n        }\n        // if event started in Thumbnail (outside of View)\n        else {\n          // Set hook point as View center\n          this.overlayHookPointX = this.viewW / 2\n          this.overlayHookPointY = this.viewH / 2\n\n          // Move View to start point\n          this._eventMove(ev)\n        }\n      }\n    }\n\n  , _eventMove: function (ev) {\n      var that = this\n\n      this._checkMousePosition(ev)\n\n      // break if it is useless event\n      if (!this.overlayInMovement) {\n        return;\n      }\n\n      // Update cache\n      this.viewX = ev.offsetX - this.overlayHookPointX\n      this.viewY = ev.offsetY - this.overlayHookPointY\n\n      // Update view position\n      this.$view.style['left'] = this.viewX + 'px';\n      this.$view.style['top'] = this.viewY + 'px';\n\n      // Move Cy\n      if (this.options.viewLiveFramerate !== false) {\n        // trigger instantly\n        if (this.options.viewLiveFramerate == 0) {\n          this._moveCy()\n        }\n        // trigger less often than frame rate\n        else if (!this.overlayTimeout) {\n          // Set a timeout for graph movement\n          this.overlayTimeout = setTimeout(function () {\n            that._moveCy()\n            that.overlayTimeout = false\n          }, 1000 / this.options.viewLiveFramerate)\n        }\n      }\n    }\n\n  , _checkMousePosition: function (ev) {\n      // If mouse in over View\n      if(ev.offsetX > this.viewX && ev.offsetX < this.viewX + this.viewBorderHorizontal + this.viewW\n        && ev.offsetY > this.viewY && ev.offsetY < this.viewY + this.viewBorderVertical + this.viewH) {\n        this.$panel.classList.add('mouseover-view')\n      } else {\n        this.$panel.classList.remove('mouseover-view')\n      }\n    }\n\n  , _eventMoveEnd: function (ev) {\n      // Unlock view changing caused by graph events\n      this.viewLocked = false\n\n      // Remove class when mouse is not over Navigator\n      this.$panel.classList.remove('mouseover-view')\n\n      if (!this.overlayInMovement) {\n        return;\n      }\n\n      // Trigger one last move\n      this._eventMove(ev)\n\n      // If mode is not live then move graph on drag end\n      if (this.options.viewLiveFramerate === false) {\n        this._moveCy()\n      }\n\n      // Stop movement permission\n      this.overlayInMovement = false\n    }\n\n  , _eventZoom: function (ev) {\n      var ev2 = extend({}, ev.originalEvent);\n      var delta = ev.wheelDeltaY / 1000 || ev.wheelDelta / 1000 || ev.detail / -32 || ev2.wheelDeltaY / 1000 || ev2.wheelDelta / 1000 || ev2.detail / -32;\n      var zoomRate = Math.pow(10, delta)\n        , mousePosition = {\n            left: ev.offsetX\n          , top: ev.offsetY\n          }\n\n      if (this.cy.zoomingEnabled()) {\n        this._zoomCy(zoomRate, mousePosition)\n      }\n    }\n\n  , _updateThumbnailImage: function () {\n    var that = this;\n\n    if( this._thumbnailUpdating ){\n      return;\n    }\n\n    this._thumbnailUpdating = true;\n\n    var render = function() {\n      that._checkThumbnailSizesAndUpdate();\n      that._setupView();\n\n      var $img = that.$thumbnail;\n      var img = $img;\n\n      var w = that.panelWidth;\n      var h = that.panelHeight;\n      var bb = that.boundingBox;\n      var zoom = Math.min( w/bb.w, h/bb.h );\n\n      var png = that.cy.png({\n        full: true,\n        scale: zoom,\n        maxHeight: h,\n        maxWidth: w\n      });\n      if( png.indexOf('image/png') < 0 ){\n        img.removeAttribute( 'src' );\n      } else {\n        img.setAttribute( 'src', png );\n      }\n\n      var translate = {\n        x: (w - zoom*( bb.w ))/2,\n        y: (h - zoom*( bb.h ))/2\n      };\n\n      $img.style['position'] = 'absolute';\n      $img.style['left'] = translate.x + 'px';\n      $img.style['top'] = translate.y + 'px';\n\n    }\n\n    this._onRenderHandler = throttle(render, that.options.rerenderDelay)\n\n    this.cy.onRender( this._onRenderHandler )\n  }\n\n  /****************************\n    Navigator view moving\n  ****************************/\n\n  , _moveCy: function () {\n      this.cy.pan({\n        x: -(this.viewX + this.viewBorderLeft - this.thumbnailPan.x) * this.width / this.viewW\n      , y: -(this.viewY + this.viewBorderLeft - this.thumbnailPan.y) * this.height / this.viewH\n      })\n    }\n\n  /**\n   * Zooms graph.\n   *\n   * @this {cytoscapeNavigator}\n   * @param {number} zoomRate The zoom rate value. 1 is 100%.\n   */\n  , _zoomCy: function (zoomRate, zoomCenterRaw) {\n      var zoomCenter\n        , isZoomCenterInView = false\n\n      zoomCenter = {\n        x: this.width / 2\n      , y: this.height / 2\n      };\n\n      this.cy.zoom({\n        level: this.cy.zoom() * zoomRate\n      , renderedPosition: zoomCenter\n      })\n    }\n  }\n\n  // registers the extension on a cytoscape lib ref\n  var register = function( cytoscape ){\n\n    if (!cytoscape){ return; } // can't register if cytoscape unspecified\n\n    cytoscape( 'core', 'navigator', function( options ){\n      var cy = this;\n\n      return new Navigator( cy, options );\n    } );\n\n  };\n\n  if (typeof module !== 'undefined' && module.exports) { // expose as a commonjs module\n    module.exports = function( cytoscape ){\n      register( cytoscape );\n    };\n  } else if (typeof define !== 'undefined' && define.amd) { // expose as an amd/requirejs module\n    define('cytoscape-navigator', function(){\n      return register;\n    });\n  }\n\n  if (typeof cytoscape !== 'undefined') { // expose to global cytoscape (i.e. window.cytoscape)\n    register(cytoscape);\n  }\n\n})();\n"],"mappings":"AAAA;AAAC,CAAC,YAAU;EAAE,YAAY;;EAExB,IAAIA,QAAQ,GAAG;IACXC,SAAS,EAAE,KAAK,CAAC;IAAA;IACjBC,iBAAiB,EAAE,CAAC,CAAC;IAAA;IACrBC,aAAa,EAAE,GAAG,CAAC;IAAA;IACnBC,qBAAqB,EAAE,IAAI,CAAC;IAAA;IAC5BC,aAAa,EAAE,GAAG,CAAC;EACvB,CAAC;EAED,IAAIC,QAAQ,GAAI,YAAU;IACxB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;IACI;IACA,IAAIC,eAAe,GAAG,qBAAqB;;IAE3C;IACA,IAAIC,SAAS,GAAGC,IAAI,CAACC,GAAG;MACpBC,SAAS,GAAGC,IAAI,CAACC,GAAG;;IAExB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACI,IAAIA,GAAG,GAAGF,SAAS,IAAI,YAAW;MAChC,OAAO,IAAIC,IAAI,CAAC,CAAC,CAACE,OAAO,CAAC,CAAC;IAC7B,CAAC;;IAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACI,SAASR,QAAQA,CAACS,IAAI,EAAEC,IAAI,EAAEC,OAAO,EAAE;MACrC,IAAIC,IAAI;QACJC,YAAY;QACZC,MAAM;QACNC,KAAK;QACLC,OAAO;QACPC,SAAS;QACTC,YAAY;QACZC,UAAU,GAAG,CAAC;QACdC,OAAO,GAAG,KAAK;QACfC,QAAQ,GAAG,IAAI;MAEnB,IAAI,OAAOZ,IAAI,IAAI,UAAU,EAAE;QAC7B,MAAM,IAAIa,SAAS,CAACrB,eAAe,CAAC;MACtC;MACAS,IAAI,GAAGA,IAAI,GAAG,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","ignoreList":[]},"metadata":{},"sourceType":"script"}