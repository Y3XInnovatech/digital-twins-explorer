{"ast":null,"code":"/*eslint no-console:[0]*/\n/*global console*/\n\"use strict\";\n\nvar URL = require(\"./url\");\nvar Identifier = require(\"./identifier\");\nvar Module = require(\"./module\");\nvar Resource = require(\"./resource\");\nvar parseDependencies = require(\"./parse-dependencies\");\nvar compile = require(\"./compile\");\nvar has = Object.prototype.hasOwnProperty;\nmodule.exports = System;\nfunction System(location, description, options) {\n  var self = this;\n  options = options || {};\n  description = description || {};\n  self.name = options.name || description.name || \"\";\n  self.location = location;\n  self.description = description;\n  self.dependencies = {};\n  self.main = null;\n  self.resources = options.resources || {}; // by system.name / module.id\n  self.modules = options.modules || {}; // by system.name/module.id\n  self.systemLocations = options.systemLocations || {}; // by system.name;\n  self.systems = options.systems || {}; // by system.name\n  self.systemLoadedPromises = options.systemLoadedPromises || {}; // by system.name\n  self.buildSystem = options.buildSystem; // or self if undefined\n  self.strategy = options.strategy || \"nested\";\n  self.analyzers = {\n    js: self.analyzeJavaScript\n  };\n  self.translators = {\n    json: self.translateJson\n  };\n  self.internalRedirects = {};\n  self.externalRedirects = {};\n  self.node = !!options.node;\n  self.browser = !!options.browser;\n  self.parent = options.parent;\n  self.root = options.root || self;\n  // TODO options.optimize\n  // TODO options.instrument\n  self.systems[self.name] = self;\n  self.systemLocations[self.name] = self.location;\n  self.systemLoadedPromises[self.name] = Promise.resolve(self);\n  if (options.name != null && description.name == null) {\n    console.warn(\"Package loaded by name \" + JSON.stringify(options.name) + \" has no name\");\n  } else if (options.name != null && options.name !== description.name) {\n    console.warn(\"Package loaded by name \" + JSON.stringify(options.name) + \" has mismatched name \" + JSON.stringify(description.name));\n  }\n\n  // The main property of the description can only create an internal\n  // redirect, as such it normalizes absolute identifiers to relative.\n  // All other redirects, whether from internal or external identifiers, can\n  // redirect to either internal or external identifiers.\n  self.main = description.main || \"index.js\";\n  self.internalRedirects[\".js\"] = \"./\" + Identifier.resolve(self.main, \"\");\n\n  // Overlays:\n  if (options.browser) {\n    self.overlayBrowser(description);\n  }\n  if (options.node) {\n    self.overlayNode(description);\n  }\n\n  // Dependencies:\n  if (description.dependencies) {\n    self.addDependencies(description.dependencies);\n  }\n  if (self.root === self && description.devDependencies) {\n    self.addDependencies(description.devDependencies);\n  }\n\n  // Local per-extension overrides:\n  if (description.extensions) {\n    self.addExtensions(description.extensions);\n  }\n  if (description.redirects) {\n    self.addRedirects(description.redirects);\n  }\n}\nSystem.load = function loadSystem(location, options) {\n  var self = this;\n  return self.prototype.loadSystemDescription(location, \"<anonymous>\").then(function (description) {\n    return new self(location, description, options);\n  });\n};\nSystem.prototype.import = function importModule(rel, abs) {\n  var self = this;\n  return self.load(rel, abs).then(function onModuleLoaded() {\n    self.root.main = self.lookup(rel, abs);\n    return self.require(rel, abs);\n  });\n};\n\n// system.require(rel, abs) must be called only after the module and its\n// transitive dependencies have been loaded, as guaranteed by system.load(rel,\n// abs)\nSystem.prototype.require = function require(rel, abs) {\n  var self = this;\n\n  // Apart from resolving relative identifiers, this also normalizes absolute\n  // identifiers.\n  var res = Identifier.resolve(rel, abs);\n  if (Identifier.isAbsolute(rel)) {\n    if (self.externalRedirects[res] === false) {\n      return {};\n    }\n    if (self.externalRedirects[res]) {\n      return self.require(self.externalRedirects[res], res);\n    }\n    var head = Identifier.head(rel);\n    var tail = Identifier.tail(rel);\n    if (self.dependencies[head]) {\n      return self.getSystem(head, abs).requireInternalModule(tail, abs);\n    } else if (self.modules[head]) {\n      return self.requireInternalModule(rel, abs, self.modules[rel]);\n    } else {\n      var via = abs ? \" via \" + JSON.stringify(abs) : \"\";\n      throw new Error(\"Can't require \" + JSON.stringify(rel) + via + \" in \" + JSON.stringify(self.name));\n    }\n  } else {\n    return self.requireInternalModule(rel, abs);\n  }\n};\nSystem.prototype.requireInternalModule = function requireInternalModule(rel, abs, module) {\n  var self = this;\n  var res = Identifier.resolve(rel, abs);\n  var id = self.normalizeIdentifier(res);\n  if (self.internalRedirects[id]) {\n    return self.require(self.internalRedirects[id], id);\n  }\n  module = module || self.lookupInternalModule(id);\n\n  // check for load error\n  if (module.error) {\n    var error = module.error;\n    var via = abs ? \" via \" + JSON.stringify(abs) : \"\";\n    error.message = \"Can't require module \" + JSON.stringify(module.id) + via + \" in \" + JSON.stringify(self.name || self.location) + \" because \" + error.message;\n    throw error;\n  }\n\n  // do not reinitialize modules\n  if (module.exports != null) {\n    return module.exports;\n  }\n\n  // do not initialize modules that do not define a factory function\n  if (typeof module.factory !== \"function\") {\n    throw new Error(\"Can't require module \" + JSON.stringify(module.filename) + \". No exports. No exports factory.\");\n  }\n  module.require = self.makeRequire(module.id, self.root.main);\n  module.exports = {};\n\n  // Execute the factory function:\n  module.factory.call(\n  // in the context of the module:\n  null,\n  // this (defaults to global, except in strict mode)\n  module.require, module.exports, module, module.filename, module.dirname);\n  return module.exports;\n};\nSystem.prototype.makeRequire = function makeRequire(abs, main) {\n  var self = this;\n  function require(rel) {\n    return self.require(rel, abs);\n  }\n  require.main = main;\n  return require;\n};\n\n// System:\n\n// Should only be called if the system is known to have already been loaded by\n// system.loadSystem.\nSystem.prototype.getSystem = function getSystem(rel, abs) {\n  var via;\n  var hasDependency = this.dependencies[rel];\n  if (!hasDependency) {\n    via = abs ? \" via \" + JSON.stringify(abs) : \"\";\n    throw new Error(\"Can't get dependency \" + JSON.stringify(rel) + \" in package named \" + JSON.stringify(this.name) + via);\n  }\n  var dependency = this.systems[rel];\n  if (!dependency) {\n    via = abs ? \" via \" + JSON.stringify(abs) : \"\";\n    throw new Error(\"Can't get dependency \" + JSON.stringify(rel) + \" in package named \" + JSON.stringify(this.name) + via);\n  }\n  return dependency;\n};\nSystem.prototype.loadSystem = function (name, abs) {\n  var self = this;\n  //var hasDependency = self.dependencies[name];\n  //if (!hasDependency) {\n  //    var error = new Error(\"Can't load module \" + JSON.stringify(name));\n  //    error.module = true;\n  //    throw error;\n  //}\n  var loadingSystem = self.systemLoadedPromises[name];\n  if (!loadingSystem) {\n    loadingSystem = self.actuallyLoadSystem(name, abs);\n    self.systemLoadedPromises[name] = loadingSystem;\n  }\n  return loadingSystem;\n};\nSystem.prototype.loadSystemDescription = function loadSystemDescription(location, name) {\n  var self = this;\n  var descriptionLocation = URL.resolve(location, \"package.json\");\n  return self.read(descriptionLocation, \"utf-8\", \"application/json\").then(function (json) {\n    try {\n      return JSON.parse(json);\n    } catch (error) {\n      error.message = error.message + \" in \" + JSON.stringify(descriptionLocation);\n      throw error;\n    }\n  }, function (error) {\n    error.message = \"Can't load package \" + JSON.stringify(name) + \" at \" + JSON.stringify(location) + \" because \" + error.message;\n    throw error;\n  });\n};\nSystem.prototype.actuallyLoadSystem = function (name, abs) {\n  var self = this;\n  var System = self.constructor;\n  var location = self.systemLocations[name];\n  if (!location) {\n    var via = abs ? \" via \" + JSON.stringify(abs) : \"\";\n    throw new Error(\"Can't load package \" + JSON.stringify(name) + via + \" because it is not a declared dependency\");\n  }\n  var buildSystem;\n  if (self.buildSystem) {\n    buildSystem = self.buildSystem.actuallyLoadSystem(name, abs);\n  }\n  return Promise.all([self.loadSystemDescription(location, name), buildSystem]).then(function onDescriptionAndBuildSystem(args) {\n    var description = args[0];\n    var buildSystem = args[1];\n    var system = new System(location, description, {\n      parent: self,\n      root: self.root,\n      name: name,\n      resources: self.resources,\n      modules: self.modules,\n      systems: self.systems,\n      systemLocations: self.systemLocations,\n      systemLoadedPromises: self.systemLoadedPromises,\n      buildSystem: buildSystem,\n      browser: self.browser,\n      node: self.node,\n      strategy: inferStrategy(description)\n    });\n    self.systems[system.name] = system;\n    return system;\n  });\n};\nSystem.prototype.getBuildSystem = function getBuildSystem() {\n  var self = this;\n  return self.buildSystem || self;\n};\n\n// Module:\n\nSystem.prototype.normalizeIdentifier = function (id) {\n  var self = this;\n  var extension = Identifier.extension(id);\n  if (!has.call(self.translators, extension) && !has.call(self.analyzers, extension) && extension !== \"js\" && extension !== \"json\") {\n    id += \".js\";\n  }\n  return id;\n};\nSystem.prototype.load = function load(rel, abs) {\n  var self = this;\n  return self.deepLoad(rel, abs).then(function () {\n    return self.deepCompile(rel, abs, {});\n  });\n};\nSystem.prototype.deepCompile = function deepCompile(rel, abs, memo) {\n  var self = this;\n  var res = Identifier.resolve(rel, abs);\n  if (Identifier.isAbsolute(rel)) {\n    if (self.externalRedirects[res]) {\n      return self.deepCompile(self.externalRedirects[res], res, memo);\n    }\n    var head = Identifier.head(rel);\n    var tail = Identifier.tail(rel);\n    if (self.dependencies[head]) {\n      var system = self.getSystem(head, abs);\n      return system.compileInternalModule(tail, \"\", memo);\n    } else {\n      // XXX no clear idea what to do in this load case.\n      // Should never reject, but should cause require to produce an\n      // error.\n      return Promise.resolve();\n    }\n  } else {\n    return self.compileInternalModule(rel, abs, memo);\n  }\n};\nSystem.prototype.compileInternalModule = function compileInternalModule(rel, abs, memo) {\n  var self = this;\n  var res = Identifier.resolve(rel, abs);\n  var id = self.normalizeIdentifier(res);\n  if (self.internalRedirects[id]) {\n    return self.deepCompile(self.internalRedirects[id], \"\", memo);\n  }\n  var module = self.lookupInternalModule(id, abs);\n\n  // Break the cycle of violence\n  if (memo[module.key]) {\n    return Promise.resolve();\n  }\n  memo[module.key] = true;\n  if (module.compiled) {\n    return Promise.resolve();\n  }\n  module.compiled = true;\n  return Promise.resolve().then(function () {\n    return Promise.all(module.dependencies.map(function (dependency) {\n      return self.deepCompile(dependency, module.id, memo);\n    }));\n  }).then(function () {\n    return self.translate(module);\n  }).then(function () {\n    return self.compile(module);\n  }).catch(function (error) {\n    module.error = error;\n  });\n};\n\n// Loads a module and its transitive dependencies.\nSystem.prototype.deepLoad = function deepLoad(rel, abs, memo) {\n  var self = this;\n  var res = Identifier.resolve(rel, abs);\n  if (Identifier.isAbsolute(rel)) {\n    if (self.externalRedirects[res]) {\n      return self.deepLoad(self.externalRedirects[res], res, memo);\n    }\n    var head = Identifier.head(rel);\n    var tail = Identifier.tail(rel);\n    if (self.dependencies[head]) {\n      return self.loadSystem(head, abs).then(function (system) {\n        return system.loadInternalModule(tail, \"\", memo);\n      });\n    } else {\n      // XXX no clear idea what to do in this load case.\n      // Should never reject, but should cause require to produce an\n      // error.\n      return Promise.resolve();\n    }\n  } else {\n    return self.loadInternalModule(rel, abs, memo);\n  }\n};\nSystem.prototype.loadInternalModule = function loadInternalModule(rel, abs, memo) {\n  var self = this;\n  var res = Identifier.resolve(rel, abs);\n  var id = self.normalizeIdentifier(res);\n  if (self.internalRedirects[id]) {\n    return self.deepLoad(self.internalRedirects[id], \"\", memo);\n  }\n\n  // Extension must be captured before normalization since it is used to\n  // determine whether to attempt to fallback to index.js for identifiers\n  // that might refer to directories.\n  var extension = Identifier.extension(res);\n  var module = self.lookupInternalModule(id, abs);\n\n  // Break the cycle of violence\n  memo = memo || {};\n  if (memo[module.key]) {\n    return Promise.resolve();\n  }\n  memo[module.key] = true;\n\n  // Return a memoized load\n  if (module.loadedPromise) {\n    return module.loadedPromise;\n  }\n  module.loadedPromise = Promise.resolve().then(function () {\n    if (module.factory == null && module.exports == null) {\n      return self.read(module.location, \"utf-8\").then(function (text) {\n        module.text = text;\n        return self.finishLoadingModule(module, memo);\n      }, fallback);\n    }\n  });\n  function fallback(error) {\n    var redirect = Identifier.resolve(\"./index.js\", res);\n    module.redirect = redirect;\n    if (!error || error.notFound && extension === \"\") {\n      return self.loadInternalModule(redirect, abs, memo).catch(function (fallbackError) {\n        module.redirect = null;\n        // Prefer the original error\n        module.error = error || fallbackError;\n      });\n    } else {\n      module.error = error;\n    }\n  }\n  return module.loadedPromise;\n};\nSystem.prototype.finishLoadingModule = function finishLoadingModule(module, memo) {\n  var self = this;\n  return Promise.resolve().then(function () {\n    return self.analyze(module);\n  }).then(function () {\n    return Promise.all(module.dependencies.map(function onDependency(dependency) {\n      return self.deepLoad(dependency, module.id, memo);\n    }));\n  });\n};\nSystem.prototype.lookup = function lookup(rel, abs) {\n  var self = this;\n  var res = Identifier.resolve(rel, abs);\n  if (Identifier.isAbsolute(rel)) {\n    if (self.externalRedirects[res]) {\n      return self.lookup(self.externalRedirects[res], res);\n    }\n    var head = Identifier.head(res);\n    var tail = Identifier.tail(res);\n    if (self.dependencies[head]) {\n      return self.getSystem(head, abs).lookupInternalModule(tail, \"\");\n    } else if (self.modules[head] && !tail) {\n      return self.modules[head];\n    } else {\n      var via = abs ? \" via \" + JSON.stringify(abs) : \"\";\n      throw new Error(\"Can't look up \" + JSON.stringify(rel) + via + \" in \" + JSON.stringify(self.location) + \" because there is no external module or dependency by that name\");\n    }\n  } else {\n    return self.lookupInternalModule(rel, abs);\n  }\n};\nSystem.prototype.lookupInternalModule = function lookupInternalModule(rel, abs) {\n  var self = this;\n  var res = Identifier.resolve(rel, abs);\n  var id = self.normalizeIdentifier(res);\n  if (self.internalRedirects[id]) {\n    return self.lookup(self.internalRedirects[id], res);\n  }\n  var filename = self.name + \"/\" + id;\n  // This module system is case-insensitive, but mandates that a module must\n  // be consistently identified by the same case convention to avoid problems\n  // when migrating to case-sensitive file systems.\n  var key = filename.toLowerCase();\n  var module = self.modules[key];\n  if (module && module.redirect && module.redirect !== module.id) {\n    return self.lookupInternalModule(module.redirect);\n  }\n  if (!module) {\n    module = new Module();\n    module.id = id;\n    module.extension = Identifier.extension(id);\n    module.location = URL.resolve(self.location, id);\n    module.filename = filename;\n    module.dirname = Identifier.dirname(filename);\n    module.key = key;\n    module.system = self;\n    module.modules = self.modules;\n    self.modules[key] = module;\n  }\n  if (module.filename !== filename) {\n    module.error = new Error(\"Can't refer to single module with multiple case conventions: \" + JSON.stringify(filename) + \" and \" + JSON.stringify(module.filename));\n  }\n  return module;\n};\nSystem.prototype.addExtensions = function (map) {\n  var extensions = Object.keys(map);\n  for (var index = 0; index < extensions.length; index++) {\n    var extension = extensions[index];\n    var id = map[extension];\n    this.analyzers[extension] = this.makeLoadStep(id, \"analyze\");\n    this.translators[extension] = this.makeLoadStep(id, \"translate\");\n  }\n};\nSystem.prototype.makeLoadStep = function makeLoadStep(id, name) {\n  var self = this;\n  return function moduleLoaderStep(module) {\n    return self.getBuildSystem().import(id).then(function (exports) {\n      if (exports[name]) {\n        return exports[name](module);\n      }\n    });\n  };\n};\n\n// Translate:\n\nSystem.prototype.translate = function translate(module) {\n  var self = this;\n  if (module.text != null && module.extension != null && self.translators[module.extension]) {\n    return self.translators[module.extension](module);\n  }\n};\nSystem.prototype.translateJson = function translateJson(module) {\n  module.text = \"module.exports = \" + module.text.trim() + \";\\n\";\n};\n\n// Analyze:\n\nSystem.prototype.analyze = function analyze(module) {\n  if (module.text != null && module.extension != null && this.analyzers[module.extension]) {\n    return this.analyzers[module.extension](module);\n  }\n};\nSystem.prototype.analyzeJavaScript = function analyzeJavaScript(module) {\n  module.dependencies.push.apply(module.dependencies, parseDependencies(module.text));\n};\n\n// Compile:\n\nSystem.prototype.compile = function (module) {\n  if (module.factory == null && module.redirect == null && module.exports == null) {\n    compile(module);\n  }\n};\n\n// Resource:\n\nSystem.prototype.getResource = function getResource(rel, abs) {\n  var self = this;\n  if (Identifier.isAbsolute(rel)) {\n    var head = Identifier.head(rel);\n    var tail = Identifier.tail(rel);\n    return self.getSystem(head, abs).getInternalResource(tail);\n  } else {\n    return self.getInternalResource(Identifier.resolve(rel, abs));\n  }\n};\nSystem.prototype.locateResource = function locateResource(rel, abs) {\n  var self = this;\n  if (Identifier.isAbsolute(rel)) {\n    var head = Identifier.head(rel);\n    var tail = Identifier.tail(rel);\n    return self.loadSystem(head, abs).then(function onSystemLoaded(subsystem) {\n      return subsystem.getInternalResource(tail);\n    });\n  } else {\n    return Promise.resolve(self.getInternalResource(Identifier.resolve(rel, abs)));\n  }\n};\nSystem.prototype.getInternalResource = function getInternalResource(id) {\n  var self = this;\n  // TODO redirects\n  var filename = self.name + \"/\" + id;\n  var key = filename.toLowerCase();\n  var resource = self.resources[key];\n  if (!resource) {\n    resource = new Resource();\n    resource.id = id;\n    resource.filename = filename;\n    resource.dirname = Identifier.dirname(filename);\n    resource.key = key;\n    resource.location = URL.resolve(self.location, id);\n    resource.system = self;\n    self.resources[key] = resource;\n  }\n  return resource;\n};\n\n// Dependencies:\n\nSystem.prototype.addDependencies = function addDependencies(dependencies) {\n  var self = this;\n  var names = Object.keys(dependencies);\n  for (var index = 0; index < names.length; index++) {\n    var name = names[index];\n    self.dependencies[name] = true;\n    if (!self.systemLocations[name]) {\n      var location;\n      if (this.strategy === \"flat\") {\n        location = URL.resolve(self.root.location, \"node_modules/\" + name + \"/\");\n      } else {\n        location = URL.resolve(self.location, \"node_modules/\" + name + \"/\");\n      }\n      self.systemLocations[name] = location;\n    }\n  }\n};\n\n// introduce allows an analyzer module to introduce a package to a dependency\n// of the analyzer's package.\nSystem.prototype.introduce = function introduce(system, name) {\n  if (!this.dependencies[name]) {\n    throw new Error(\"Extension package cannot introduce a module to a package that the analyzer does not directly depend upon.\");\n  }\n  system.dependencies[name] = true;\n  if (!system.systemLocations[name]) {\n    system.systemLocations[name] = this.systemLocations[name];\n  }\n};\n\n// Redirects:\n\nSystem.prototype.addRedirects = function addRedirects(redirects) {\n  var self = this;\n  var sources = Object.keys(redirects);\n  for (var index = 0; index < sources.length; index++) {\n    var source = sources[index];\n    var target = redirects[source];\n    self.addRedirect(source, target);\n  }\n};\nSystem.prototype.addRedirect = function addRedirect(source, target) {\n  var self = this;\n  if (Identifier.isAbsolute(source)) {\n    self.externalRedirects[source] = target;\n  } else {\n    source = self.normalizeIdentifier(Identifier.resolve(source));\n    self.internalRedirects[source] = target;\n  }\n};\n\n// Etc:\n\nSystem.prototype.overlayBrowser = function overlayBrowser(description) {\n  var self = this;\n  if (typeof description.browser === \"string\") {\n    self.addRedirect(\"\", description.browser);\n  } else if (description.browser && typeof description.browser === \"object\") {\n    self.addRedirects(description.browser);\n  }\n};\nSystem.prototype.inspect = function () {\n  var self = this;\n  return {\n    type: \"system\",\n    location: self.location\n  };\n};\nfunction inferStrategy(description) {\n  // The existence of an _args property in package.json distinguishes\n  // packages that were installed with npm version 3 or higher.\n  if (description._args) {\n    return \"flat\";\n  }\n  return \"nested\";\n}","map":{"version":3,"names":["URL","require","Identifier","Module","Resource","parseDependencies","compile","has","Object","prototype","hasOwnProperty","module","exports","System","location","description","options","self","name","dependencies","main","resources","modules","systemLocations","systems","systemLoadedPromises","buildSystem","strategy","analyzers","js","analyzeJavaScript","translators","json","translateJson","internalRedirects","externalRedirects","node","browser","parent","root","Promise","resolve","console","warn","JSON","stringify","overlayBrowser","overlayNode","addDependencies","devDependencies","extensions","addExtensions","redirects","addRedirects","load","loadSystem","loadSystemDescription","then","import","importModule","rel","abs","onModuleLoaded","lookup","res","isAbsolute","head","tail","getSystem","requireInternalModule","via","Error","id","normalizeIdentifier","lookupInternalModule","error","message","factory","filename","makeRequire","call","dirname","hasDependency","dependency","loadingSystem","actuallyLoadSystem","descriptionLocation","read","parse","constructor","all","onDescriptionAndBuildSystem","args","system","inferStrategy","getBuildSystem","extension","deepLoad","deepCompile","memo","compileInternalModule","key","compiled","map","translate","catch","loadInternalModule","loadedPromise","text","finishLoadingModule","fallback","redirect","notFound","fallbackError","analyze","onDependency","toLowerCase","keys","index","length","makeLoadStep","moduleLoaderStep","trim","push","apply","getResource","getInternalResource","locateResource","onSystemLoaded","subsystem","resource","names","introduce","sources","source","target","addRedirect","inspect","type","_args"],"sources":["/home/saharsh/digital-twins-explorer/client/node_modules/system/common-system.js"],"sourcesContent":["/*eslint no-console:[0]*/\n/*global console*/\n\"use strict\";\n\nvar URL = require(\"./url\");\nvar Identifier = require(\"./identifier\");\nvar Module = require(\"./module\");\nvar Resource = require(\"./resource\");\nvar parseDependencies = require(\"./parse-dependencies\");\nvar compile = require(\"./compile\");\nvar has = Object.prototype.hasOwnProperty;\n\nmodule.exports = System;\n\nfunction System(location, description, options) {\n    var self = this;\n    options = options || {};\n    description = description || {};\n    self.name = options.name || description.name || \"\";\n    self.location = location;\n    self.description = description;\n    self.dependencies = {};\n    self.main = null;\n    self.resources = options.resources || {}; // by system.name / module.id\n    self.modules = options.modules || {}; // by system.name/module.id\n    self.systemLocations = options.systemLocations || {}; // by system.name;\n    self.systems = options.systems || {}; // by system.name\n    self.systemLoadedPromises = options.systemLoadedPromises || {}; // by system.name\n    self.buildSystem = options.buildSystem; // or self if undefined\n    self.strategy = options.strategy || \"nested\";\n    self.analyzers = {js: self.analyzeJavaScript};\n    self.translators = {json: self.translateJson};\n    self.internalRedirects = {};\n    self.externalRedirects = {};\n    self.node = !!options.node;\n    self.browser = !!options.browser;\n    self.parent = options.parent;\n    self.root = options.root || self;\n    // TODO options.optimize\n    // TODO options.instrument\n    self.systems[self.name] = self;\n    self.systemLocations[self.name] = self.location;\n    self.systemLoadedPromises[self.name] = Promise.resolve(self);\n\n    if (options.name != null && description.name == null) {\n        console.warn(\n            \"Package loaded by name \" + JSON.stringify(options.name) +\n            \" has no name\"\n        );\n    } else if (options.name != null && options.name !== description.name) {\n        console.warn(\n            \"Package loaded by name \" + JSON.stringify(options.name) +\n            \" has mismatched name \" + JSON.stringify(description.name)\n        );\n    }\n\n    // The main property of the description can only create an internal\n    // redirect, as such it normalizes absolute identifiers to relative.\n    // All other redirects, whether from internal or external identifiers, can\n    // redirect to either internal or external identifiers.\n    self.main = description.main || \"index.js\";\n    self.internalRedirects[\".js\"] = \"./\" + Identifier.resolve(self.main, \"\");\n\n    // Overlays:\n    if (options.browser) { self.overlayBrowser(description); }\n    if (options.node) { self.overlayNode(description); }\n\n    // Dependencies:\n    if (description.dependencies) {\n        self.addDependencies(description.dependencies);\n    }\n    if (self.root === self && description.devDependencies) {\n        self.addDependencies(description.devDependencies);\n    }\n\n    // Local per-extension overrides:\n    if (description.extensions) { self.addExtensions(description.extensions); }\n    if (description.redirects) { self.addRedirects(description.redirects); }\n}\n\nSystem.load = function loadSystem(location, options) {\n    var self = this;\n    return self.prototype.loadSystemDescription(location, \"<anonymous>\")\n    .then(function (description) {\n        return new self(location, description, options);\n    });\n};\n\nSystem.prototype.import = function importModule(rel, abs) {\n    var self = this;\n    return self.load(rel, abs)\n    .then(function onModuleLoaded() {\n        self.root.main = self.lookup(rel, abs);\n        return self.require(rel, abs);\n    });\n};\n\n// system.require(rel, abs) must be called only after the module and its\n// transitive dependencies have been loaded, as guaranteed by system.load(rel,\n// abs)\nSystem.prototype.require = function require(rel, abs) {\n    var self = this;\n\n    // Apart from resolving relative identifiers, this also normalizes absolute\n    // identifiers.\n    var res = Identifier.resolve(rel, abs);\n    if (Identifier.isAbsolute(rel)) {\n        if (self.externalRedirects[res] === false) {\n            return {};\n        }\n        if (self.externalRedirects[res]) {\n            return self.require(self.externalRedirects[res], res);\n        }\n        var head = Identifier.head(rel);\n        var tail = Identifier.tail(rel);\n        if (self.dependencies[head]) {\n            return self.getSystem(head, abs).requireInternalModule(tail, abs);\n        } else if (self.modules[head]) {\n            return self.requireInternalModule(rel, abs, self.modules[rel]);\n        } else {\n            var via = abs ? \" via \" + JSON.stringify(abs) : \"\";\n            throw new Error(\"Can't require \" + JSON.stringify(rel) + via + \" in \" + JSON.stringify(self.name));\n        }\n    } else {\n        return self.requireInternalModule(rel, abs);\n    }\n};\n\nSystem.prototype.requireInternalModule = function requireInternalModule(rel, abs, module) {\n    var self = this;\n\n    var res = Identifier.resolve(rel, abs);\n    var id = self.normalizeIdentifier(res);\n    if (self.internalRedirects[id]) {\n        return self.require(self.internalRedirects[id], id);\n    }\n\n    module = module || self.lookupInternalModule(id);\n\n    // check for load error\n    if (module.error) {\n        var error = module.error;\n        var via = abs ? \" via \" + JSON.stringify(abs) : \"\";\n        error.message = (\n            \"Can't require module \" + JSON.stringify(module.id) +\n            via +\n            \" in \" + JSON.stringify(self.name || self.location) +\n            \" because \" + error.message\n        );\n        throw error;\n    }\n\n    // do not reinitialize modules\n    if (module.exports != null) {\n        return module.exports;\n    }\n\n    // do not initialize modules that do not define a factory function\n    if (typeof module.factory !== \"function\") {\n        throw new Error(\n            \"Can't require module \" + JSON.stringify(module.filename) +\n            \". No exports. No exports factory.\"\n        );\n    }\n\n    module.require = self.makeRequire(module.id, self.root.main);\n    module.exports = {};\n\n    // Execute the factory function:\n    module.factory.call(\n        // in the context of the module:\n        null, // this (defaults to global, except in strict mode)\n        module.require,\n        module.exports,\n        module,\n        module.filename,\n        module.dirname\n    );\n\n    return module.exports;\n};\n\nSystem.prototype.makeRequire = function makeRequire(abs, main) {\n    var self = this;\n    function require(rel) {\n        return self.require(rel, abs);\n    }\n    require.main = main;\n    return require;\n};\n\n// System:\n\n// Should only be called if the system is known to have already been loaded by\n// system.loadSystem.\nSystem.prototype.getSystem = function getSystem(rel, abs) {\n    var via;\n    var hasDependency = this.dependencies[rel];\n    if (!hasDependency) {\n        via = abs ? \" via \" + JSON.stringify(abs) : \"\";\n        throw new Error(\n            \"Can't get dependency \" + JSON.stringify(rel) +\n            \" in package named \" + JSON.stringify(this.name) + via\n        );\n    }\n    var dependency = this.systems[rel];\n    if (!dependency) {\n        via = abs ? \" via \" + JSON.stringify(abs) : \"\";\n        throw new Error(\n            \"Can't get dependency \" + JSON.stringify(rel) +\n            \" in package named \" + JSON.stringify(this.name) + via\n        );\n    }\n    return dependency;\n};\n\nSystem.prototype.loadSystem = function (name, abs) {\n    var self = this;\n    //var hasDependency = self.dependencies[name];\n    //if (!hasDependency) {\n    //    var error = new Error(\"Can't load module \" + JSON.stringify(name));\n    //    error.module = true;\n    //    throw error;\n    //}\n    var loadingSystem = self.systemLoadedPromises[name];\n    if (!loadingSystem) {\n        loadingSystem = self.actuallyLoadSystem(name, abs);\n        self.systemLoadedPromises[name] = loadingSystem;\n    }\n    return loadingSystem;\n};\n\nSystem.prototype.loadSystemDescription = function loadSystemDescription(location, name) {\n    var self = this;\n    var descriptionLocation = URL.resolve(location, \"package.json\");\n    return self.read(descriptionLocation, \"utf-8\", \"application/json\")\n    .then(function (json) {\n        try {\n            return JSON.parse(json);\n        } catch (error) {\n            error.message = error.message + \" in \" +\n                JSON.stringify(descriptionLocation);\n            throw error;\n        }\n    }, function (error) {\n        error.message = \"Can't load package \" + JSON.stringify(name) + \" at \" +\n            JSON.stringify(location) + \" because \" + error.message;\n        throw error;\n    });\n};\n\nSystem.prototype.actuallyLoadSystem = function (name, abs) {\n    var self = this;\n    var System = self.constructor;\n    var location = self.systemLocations[name];\n    if (!location) {\n        var via = abs ? \" via \" + JSON.stringify(abs) : \"\";\n        throw new Error(\n            \"Can't load package \" + JSON.stringify(name) + via +\n            \" because it is not a declared dependency\"\n        );\n    }\n    var buildSystem;\n    if (self.buildSystem) {\n        buildSystem = self.buildSystem.actuallyLoadSystem(name, abs);\n    }\n    return Promise.all([\n        self.loadSystemDescription(location, name),\n        buildSystem\n    ]).then(function onDescriptionAndBuildSystem(args) {\n        var description = args[0];\n        var buildSystem = args[1];\n        var system = new System(location, description, {\n            parent: self,\n            root: self.root,\n            name: name,\n            resources: self.resources,\n            modules: self.modules,\n            systems: self.systems,\n            systemLocations: self.systemLocations,\n            systemLoadedPromises: self.systemLoadedPromises,\n            buildSystem: buildSystem,\n            browser: self.browser,\n            node: self.node,\n            strategy: inferStrategy(description)\n        });\n        self.systems[system.name] = system;\n        return system;\n    });\n};\n\nSystem.prototype.getBuildSystem = function getBuildSystem() {\n    var self = this;\n    return self.buildSystem || self;\n};\n\n// Module:\n\nSystem.prototype.normalizeIdentifier = function (id) {\n    var self = this;\n    var extension = Identifier.extension(id);\n    if (\n        !has.call(self.translators, extension) &&\n        !has.call(self.analyzers, extension) &&\n        extension !== \"js\" &&\n        extension !== \"json\"\n    ) {\n        id += \".js\";\n    }\n    return id;\n};\n\nSystem.prototype.load = function load(rel, abs) {\n    var self = this;\n    return self.deepLoad(rel, abs)\n    .then(function () {\n        return self.deepCompile(rel, abs, {});\n    });\n};\n\nSystem.prototype.deepCompile = function deepCompile(rel, abs, memo) {\n    var self = this;\n\n    var res = Identifier.resolve(rel, abs);\n    if (Identifier.isAbsolute(rel)) {\n        if (self.externalRedirects[res]) {\n            return self.deepCompile(self.externalRedirects[res], res, memo);\n        }\n        var head = Identifier.head(rel);\n        var tail = Identifier.tail(rel);\n        if (self.dependencies[head]) {\n            var system = self.getSystem(head, abs);\n            return system.compileInternalModule(tail, \"\", memo);\n        } else {\n            // XXX no clear idea what to do in this load case.\n            // Should never reject, but should cause require to produce an\n            // error.\n            return Promise.resolve();\n        }\n    } else {\n        return self.compileInternalModule(rel, abs, memo);\n    }\n};\n\nSystem.prototype.compileInternalModule = function compileInternalModule(rel, abs, memo) {\n    var self = this;\n\n    var res = Identifier.resolve(rel, abs);\n    var id = self.normalizeIdentifier(res);\n    if (self.internalRedirects[id]) {\n        return self.deepCompile(self.internalRedirects[id], \"\", memo);\n    }\n    var module = self.lookupInternalModule(id, abs);\n\n    // Break the cycle of violence\n    if (memo[module.key]) {\n        return Promise.resolve();\n    }\n    memo[module.key] = true;\n\n    if (module.compiled) {\n        return Promise.resolve();\n    }\n    module.compiled = true;\n    return Promise.resolve().then(function () {\n        return Promise.all(module.dependencies.map(function (dependency) {\n            return self.deepCompile(dependency, module.id, memo);\n        }));\n    }).then(function () {\n        return self.translate(module);\n    }).then(function () {\n        return self.compile(module);\n    }).catch(function (error) {\n        module.error = error;\n    });\n};\n\n// Loads a module and its transitive dependencies.\nSystem.prototype.deepLoad = function deepLoad(rel, abs, memo) {\n    var self = this;\n    var res = Identifier.resolve(rel, abs);\n    if (Identifier.isAbsolute(rel)) {\n        if (self.externalRedirects[res]) {\n            return self.deepLoad(self.externalRedirects[res], res, memo);\n        }\n        var head = Identifier.head(rel);\n        var tail = Identifier.tail(rel);\n        if (self.dependencies[head]) {\n            return self.loadSystem(head, abs)\n            .then(function (system) {\n                return system.loadInternalModule(tail, \"\", memo);\n            });\n        } else {\n            // XXX no clear idea what to do in this load case.\n            // Should never reject, but should cause require to produce an\n            // error.\n            return Promise.resolve();\n        }\n    } else {\n        return self.loadInternalModule(rel, abs, memo);\n    }\n};\n\nSystem.prototype.loadInternalModule = function loadInternalModule(rel, abs, memo) {\n    var self = this;\n\n    var res = Identifier.resolve(rel, abs);\n    var id = self.normalizeIdentifier(res);\n    if (self.internalRedirects[id]) {\n        return self.deepLoad(self.internalRedirects[id], \"\", memo);\n    }\n\n    // Extension must be captured before normalization since it is used to\n    // determine whether to attempt to fallback to index.js for identifiers\n    // that might refer to directories.\n    var extension = Identifier.extension(res);\n\n    var module = self.lookupInternalModule(id, abs);\n\n    // Break the cycle of violence\n    memo = memo || {};\n    if (memo[module.key]) {\n        return Promise.resolve();\n    }\n    memo[module.key] = true;\n\n    // Return a memoized load\n    if (module.loadedPromise) {\n        return module.loadedPromise;\n    }\n    module.loadedPromise = Promise.resolve()\n    .then(function () {\n        if (module.factory == null && module.exports == null) {\n            return self.read(module.location, \"utf-8\")\n            .then(function (text) {\n                module.text = text;\n                return self.finishLoadingModule(module, memo);\n            }, fallback);\n        }\n    });\n\n    function fallback(error) {\n        var redirect = Identifier.resolve(\"./index.js\", res);\n        module.redirect = redirect;\n        if (!error || error.notFound && extension === \"\") {\n            return self.loadInternalModule(redirect, abs, memo)\n            .catch(function (fallbackError) {\n                module.redirect = null;\n                // Prefer the original error\n                module.error = error || fallbackError;\n            });\n        } else {\n            module.error = error;\n        }\n    }\n\n    return module.loadedPromise;\n};\n\nSystem.prototype.finishLoadingModule = function finishLoadingModule(module, memo) {\n    var self = this;\n    return Promise.resolve().then(function () {\n        return self.analyze(module);\n    }).then(function () {\n        return Promise.all(module.dependencies.map(function onDependency(dependency) {\n            return self.deepLoad(dependency, module.id, memo);\n        }));\n    });\n};\n\nSystem.prototype.lookup = function lookup(rel, abs) {\n    var self = this;\n    var res = Identifier.resolve(rel, abs);\n    if (Identifier.isAbsolute(rel)) {\n        if (self.externalRedirects[res]) {\n            return self.lookup(self.externalRedirects[res], res);\n        }\n        var head = Identifier.head(res);\n        var tail = Identifier.tail(res);\n        if (self.dependencies[head]) {\n            return self.getSystem(head, abs).lookupInternalModule(tail, \"\");\n        } else if (self.modules[head] && !tail) {\n            return self.modules[head];\n        } else {\n            var via = abs ? \" via \" + JSON.stringify(abs) : \"\";\n            throw new Error(\n                \"Can't look up \" + JSON.stringify(rel) + via +\n                \" in \" + JSON.stringify(self.location) +\n                \" because there is no external module or dependency by that name\"\n            );\n        }\n    } else {\n        return self.lookupInternalModule(rel, abs);\n    }\n};\n\nSystem.prototype.lookupInternalModule = function lookupInternalModule(rel, abs) {\n    var self = this;\n\n    var res = Identifier.resolve(rel, abs);\n    var id = self.normalizeIdentifier(res);\n\n    if (self.internalRedirects[id]) {\n        return self.lookup(self.internalRedirects[id], res);\n    }\n\n    var filename = self.name + \"/\" + id;\n    // This module system is case-insensitive, but mandates that a module must\n    // be consistently identified by the same case convention to avoid problems\n    // when migrating to case-sensitive file systems.\n    var key = filename.toLowerCase();\n    var module = self.modules[key];\n\n    if (module && module.redirect && module.redirect !== module.id) {\n        return self.lookupInternalModule(module.redirect);\n    }\n\n    if (!module) {\n        module = new Module();\n        module.id = id;\n        module.extension = Identifier.extension(id);\n        module.location = URL.resolve(self.location, id);\n        module.filename = filename;\n        module.dirname = Identifier.dirname(filename);\n        module.key = key;\n        module.system = self;\n        module.modules = self.modules;\n        self.modules[key] = module;\n    }\n\n    if (module.filename !== filename) {\n        module.error = new Error(\n            \"Can't refer to single module with multiple case conventions: \" +\n            JSON.stringify(filename) + \" and \" +\n            JSON.stringify(module.filename)\n        );\n    }\n\n    return module;\n};\n\nSystem.prototype.addExtensions = function (map) {\n    var extensions = Object.keys(map);\n    for (var index = 0; index < extensions.length; index++) {\n        var extension = extensions[index];\n        var id = map[extension];\n        this.analyzers[extension] = this.makeLoadStep(id, \"analyze\");\n        this.translators[extension] = this.makeLoadStep(id, \"translate\");\n    }\n};\n\nSystem.prototype.makeLoadStep = function makeLoadStep(id, name) {\n    var self = this;\n    return function moduleLoaderStep(module) {\n        return self.getBuildSystem()\n        .import(id)\n        .then(function (exports) {\n            if (exports[name]) {\n                return exports[name](module);\n            }\n        });\n    };\n};\n\n// Translate:\n\nSystem.prototype.translate = function translate(module) {\n    var self = this;\n    if (\n        module.text != null &&\n        module.extension != null &&\n        self.translators[module.extension]\n    ) {\n        return self.translators[module.extension](module);\n    }\n};\n\nSystem.prototype.translateJson = function translateJson(module) {\n    module.text = \"module.exports = \" + module.text.trim() + \";\\n\";\n};\n\n// Analyze:\n\nSystem.prototype.analyze = function analyze(module) {\n    if (\n        module.text != null &&\n        module.extension != null &&\n        this.analyzers[module.extension]\n    ) {\n        return this.analyzers[module.extension](module);\n    }\n};\n\nSystem.prototype.analyzeJavaScript = function analyzeJavaScript(module) {\n    module.dependencies.push.apply(module.dependencies, parseDependencies(module.text));\n};\n\n// Compile:\n\nSystem.prototype.compile = function (module) {\n    if (\n        module.factory == null &&\n        module.redirect == null &&\n        module.exports == null\n    ) {\n        compile(module);\n    }\n};\n\n// Resource:\n\nSystem.prototype.getResource = function getResource(rel, abs) {\n    var self = this;\n    if (Identifier.isAbsolute(rel)) {\n        var head = Identifier.head(rel);\n        var tail = Identifier.tail(rel);\n        return self.getSystem(head, abs).getInternalResource(tail);\n    } else {\n        return self.getInternalResource(Identifier.resolve(rel, abs));\n    }\n};\n\nSystem.prototype.locateResource = function locateResource(rel, abs) {\n    var self = this;\n    if (Identifier.isAbsolute(rel)) {\n        var head = Identifier.head(rel);\n        var tail = Identifier.tail(rel);\n        return self.loadSystem(head, abs)\n        .then(function onSystemLoaded(subsystem) {\n            return subsystem.getInternalResource(tail);\n        });\n    } else {\n        return Promise.resolve(self.getInternalResource(Identifier.resolve(rel, abs)));\n    }\n};\n\nSystem.prototype.getInternalResource = function getInternalResource(id) {\n    var self = this;\n    // TODO redirects\n    var filename = self.name + \"/\" + id;\n    var key = filename.toLowerCase();\n    var resource = self.resources[key];\n    if (!resource) {\n        resource = new Resource();\n        resource.id = id;\n        resource.filename = filename;\n        resource.dirname = Identifier.dirname(filename);\n        resource.key = key;\n        resource.location = URL.resolve(self.location, id);\n        resource.system = self;\n        self.resources[key] = resource;\n    }\n    return resource;\n};\n\n// Dependencies:\n\nSystem.prototype.addDependencies = function addDependencies(dependencies) {\n    var self = this;\n    var names = Object.keys(dependencies);\n    for (var index = 0; index < names.length; index++) {\n        var name = names[index];\n        self.dependencies[name] = true;\n        if (!self.systemLocations[name]) {\n            var location;\n            if (this.strategy === \"flat\") {\n                location = URL.resolve(self.root.location, \"node_modules/\" + name + \"/\");\n            } else {\n                location = URL.resolve(self.location, \"node_modules/\" + name + \"/\");\n            }\n            self.systemLocations[name] = location;\n        }\n    }\n};\n\n// introduce allows an analyzer module to introduce a package to a dependency\n// of the analyzer's package.\nSystem.prototype.introduce = function introduce(system, name) {\n    if (!this.dependencies[name]) {\n        throw new Error(\"Extension package cannot introduce a module to a package that the analyzer does not directly depend upon.\");\n    }\n    system.dependencies[name] = true;\n    if (!system.systemLocations[name]) {\n        system.systemLocations[name] = this.systemLocations[name];\n    }\n};\n\n// Redirects:\n\nSystem.prototype.addRedirects = function addRedirects(redirects) {\n    var self = this;\n    var sources = Object.keys(redirects);\n    for (var index = 0; index < sources.length; index++) {\n        var source = sources[index];\n        var target = redirects[source];\n        self.addRedirect(source, target);\n    }\n};\n\nSystem.prototype.addRedirect = function addRedirect(source, target) {\n    var self = this;\n    if (Identifier.isAbsolute(source)) {\n        self.externalRedirects[source] = target;\n    } else {\n        source = self.normalizeIdentifier(Identifier.resolve(source));\n        self.internalRedirects[source] = target;\n    }\n};\n\n// Etc:\n\nSystem.prototype.overlayBrowser = function overlayBrowser(description) {\n    var self = this;\n    if (typeof description.browser === \"string\") {\n        self.addRedirect(\"\", description.browser);\n    } else if (description.browser && typeof description.browser === \"object\") {\n        self.addRedirects(description.browser);\n    }\n};\n\nSystem.prototype.inspect = function () {\n    var self = this;\n    return {type: \"system\", location: self.location};\n};\n\nfunction inferStrategy(description) {\n    // The existence of an _args property in package.json distinguishes\n    // packages that were installed with npm version 3 or higher.\n    if (description._args) {\n        return \"flat\";\n    }\n    return \"nested\";\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script"}