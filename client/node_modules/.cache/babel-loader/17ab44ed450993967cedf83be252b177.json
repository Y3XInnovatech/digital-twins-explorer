{"ast":null,"code":"var _jsxFileName = \"/home/saharsh/Music/digital-twins-explorer/client/src/components/GraphViewerComponent/GraphViewerTwinDeleteComponent/GraphViewerTwinDeleteComponent.js\";\n// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport React, { Component } from \"react\";\nimport { DefaultButton } from \"office-ui-fabric-react\";\nimport ModalComponent from \"../../ModalComponent/ModalComponent\";\nimport { apiService } from \"../../../services/ApiService\";\nimport { print } from \"../../../services/LoggingService\";\nimport { eventService } from \"../../../services/EventService\";\nimport \"../GraphViewerComponentShared.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport class GraphViewerTwinDeleteComponent extends Component {\n  constructor(props) {\n    super(props);\n    this.confirm = async () => {\n      await this.deleteSelected();\n      this.setState({\n        showModal: false\n      });\n    };\n    this.cancel = () => {\n      this.setState({\n        showModal: false\n      });\n    };\n    this.state = {\n      showModal: false,\n      isLoading: false\n    };\n  }\n  async deleteTwin(id) {\n    print(`*** Deleting twin ${id}`, \"info\");\n    try {\n      await apiService.deleteTwin(id);\n    } catch (exc) {\n      exc.customMessage = \"Error deleting twin\";\n      eventService.publishError(exc);\n    }\n  }\n  async deleteSelected() {\n    const {\n      onDelete,\n      selectedNode,\n      selectedNodes\n    } = this.props;\n    this.setState({\n      isLoading: true\n    });\n    if (selectedNodes.length > 1) {\n      for (let i = 0; i < selectedNodes.length; i++) {\n        await this.deleteTwin(selectedNodes[i].id);\n      }\n    } else if (selectedNode && selectedNode.id) {\n      await this.deleteTwin(selectedNode.id);\n    }\n    if (onDelete) {\n      const ids = selectedNodes.length > 1 ? selectedNodes.map(node => node.id) : [selectedNode.id];\n      onDelete(ids);\n    }\n    this.setState({\n      isLoading: false\n    });\n  }\n  open() {\n    const {\n      selectedNode\n    } = this.props;\n    if (!selectedNode) {\n      return;\n    }\n    this.setState({\n      showModal: true\n    }, () => {\n      setTimeout(() => {\n        document.getElementById(\"delete-twin-button\").focus();\n      }, 200);\n    });\n  }\n  render() {\n    const {\n      showModal,\n      isLoading\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(ModalComponent, {\n      isVisible: showModal,\n      isLoading: isLoading,\n      className: \"gc-dialog\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"heading-2\",\n        children: \"Are you sure?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btn-group\",\n        children: [/*#__PURE__*/_jsxDEV(DefaultButton, {\n          className: \"modal-button save-button\",\n          onClick: this.confirm,\n          id: \"delete-twin-button\",\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DefaultButton, {\n          className: \"modal-button cancel-button\",\n          onClick: this.cancel,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Component","DefaultButton","ModalComponent","apiService","print","eventService","jsxDEV","_jsxDEV","GraphViewerTwinDeleteComponent","constructor","props","confirm","deleteSelected","setState","showModal","cancel","state","isLoading","deleteTwin","id","exc","customMessage","publishError","onDelete","selectedNode","selectedNodes","length","i","ids","map","node","open","setTimeout","document","getElementById","focus","render","isVisible","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick"],"sources":["/home/saharsh/Music/digital-twins-explorer/client/src/components/GraphViewerComponent/GraphViewerTwinDeleteComponent/GraphViewerTwinDeleteComponent.js"],"sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport React, { Component } from \"react\";\nimport { DefaultButton } from \"office-ui-fabric-react\";\n\nimport ModalComponent from \"../../ModalComponent/ModalComponent\";\nimport { apiService } from \"../../../services/ApiService\";\nimport { print } from \"../../../services/LoggingService\";\nimport { eventService } from \"../../../services/EventService\";\n\nimport \"../GraphViewerComponentShared.scss\";\n\nexport class GraphViewerTwinDeleteComponent extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      showModal: false,\n      isLoading: false\n    };\n  }\n\n  async deleteTwin(id) {\n    print(`*** Deleting twin ${id}`, \"info\");\n    try {\n      await apiService.deleteTwin(id);\n    } catch (exc) {\n      exc.customMessage = \"Error deleting twin\";\n      eventService.publishError(exc);\n    }\n  }\n\n  async deleteSelected() {\n    const { onDelete, selectedNode, selectedNodes } = this.props;\n    this.setState({ isLoading: true });\n\n    if (selectedNodes.length > 1) {\n      for (let i = 0; i < selectedNodes.length; i++) {\n        await this.deleteTwin(selectedNodes[i].id);\n      }\n    } else if (selectedNode && selectedNode.id) {\n      await this.deleteTwin(selectedNode.id);\n    }\n\n    if (onDelete) {\n      const ids = selectedNodes.length > 1 ? selectedNodes.map(node => node.id) : [ selectedNode.id ];\n      onDelete(ids);\n    }\n\n    this.setState({ isLoading: false });\n  }\n\n  open() {\n    const { selectedNode } = this.props;\n    if (!selectedNode) {\n      return;\n    }\n\n    this.setState({ showModal: true }, () => {\n      setTimeout(() => {\n        document.getElementById(\"delete-twin-button\").focus();\n      }, 200);\n    });\n  }\n\n  confirm = async () => {\n    await this.deleteSelected();\n    this.setState({ showModal: false });\n  }\n\n  cancel = () => {\n    this.setState({ showModal: false });\n  }\n\n  render() {\n    const { showModal, isLoading } = this.state;\n    return (\n      <ModalComponent isVisible={showModal} isLoading={isLoading} className=\"gc-dialog\">\n        <h2 className=\"heading-2\">Are you sure?</h2>\n        <div className=\"btn-group\">\n          <DefaultButton className=\"modal-button save-button\" onClick={this.confirm} id=\"delete-twin-button\">Delete</DefaultButton>\n          <DefaultButton className=\"modal-button cancel-button\" onClick={this.cancel}>Cancel</DefaultButton>\n        </div>\n      </ModalComponent>\n    );\n  }\n\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}